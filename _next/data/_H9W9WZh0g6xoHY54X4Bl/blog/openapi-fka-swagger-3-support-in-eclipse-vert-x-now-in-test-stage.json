{"pageProps":{"categories":["releases","guides","security","news"],"post":{"meta":{"title":"OpenAPI (fka Swagger) 3 support in Eclipse Vert.x now in test stage!","category":"guides","authors":[{"name":"Francesco Guardiani","github_id":"slinkydeveloper"}],"summary":"As GSoC 2017's student, I'm working on an embedded support to OpenAPI 3 standard inside Eclipse Vert.x framework. Now, after a lot of work, you can try it!"},"date":"2017-07-04","slug":"openapi-fka-swagger-3-support-in-eclipse-vert-x-now-in-test-stage","readingTime":{"text":"6 min read","minutes":5.8,"time":348000,"words":1160},"content":{"compiledSource":"var m=Object.defineProperty,c=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var o=Object.getOwnPropertySymbols;var s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;var p=(a,n,t)=>n in a?m(a,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[n]=t,e=(a,n)=>{for(var t in n||(n={}))s.call(n,t)&&p(a,t,n[t]);if(o)for(var t of o(n))i.call(n,t)&&p(a,t,n[t]);return a},l=(a,n)=>c(a,h(n));var d=(a,n)=>{var t={};for(var r in a)s.call(a,r)&&n.indexOf(r)<0&&(t[r]=a[r]);if(a!=null&&o)for(var r of o(a))n.indexOf(r)<0&&i.call(a,r)&&(t[r]=a[r]);return t};const makeShortcode=a=>function(t){return console.warn(\"Component \"+a+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",e({},t))},Alert=makeShortcode(\"Alert\"),Link=makeShortcode(\"Link\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(t){var r=t,{components:a}=r,n=d(r,[\"components\"]);return mdx(MDXLayout,l(e(e({},layoutProps),n),{components:a,mdxType:\"MDXLayout\"}),mdx(Alert,{info:!0,title:\"Now on upstream!\",mdxType:\"Alert\"},mdx(\"p\",null,\"We have pub\\xADlished this pack\\xADage with name \",mdx(\"inlineCode\",{parentName:\"p\"},\"vertx-web-api-contract\"))),mdx(\"p\",null,\"As GSoC 2017\\u2019s stu\\xADdent, I\\u2019m ac\\xADtu\\xADally work\\xADing on an em\\xADbed\\xADded sup\\xADport to Ope\\xADnAPI 3 stan\\xADdard in\\xADside Eclipse Vert.x frame\\xADwork. Now, after a lot of work, you can try it!\"),mdx(\"h2\",e({},{id:\"why-openapi-3\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#why-openapi-3\"})),\"Why OpenAPI 3?\"),mdx(\"p\",null,\"Ope\\xADnAPI 2 is the most im\\xADpor\\xADtant industry-\\u200Bgrade stan\\xADdard for API Spec\\xADi\\xADfi\\xADca\\xADtions. As you can see on \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.openapis.org/blog/2017/05/25/the-open-api-initiative-is-sending-you-a-save-the-date-card?utm_source=Blog&utm_medium=Twitter&utm_campaign=SaveTheDate\"}),\"of\\xADfi\\xADcial blog of Ope\\xADnAPI Ini\\xADtia\\xADtive\"),\", the re\\xADlease of ver\\xADsion 3 is be\\xADhind the cor\\xADner, so we want to give to our com\\xADmu\\xADnity the lat\\xADest tools for the lat\\xADest stan\\xADdards!\"),mdx(\"p\",null,\"Vert.x project ob\\xADjec\\xADtive is to give you more in\\xADte\\xADgrated tools. With this new sup\\xADport, it gives you the abil\\xADity to use the \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://swaggerhub.com/blog/api-design/design-first-or-code-first-api-development/\"}),\"De\\xADsign Dri\\xADven\"),\" (or De\\xADsign First) ap\\xADproach \",mdx(\"strong\",{parentName:\"p\"},\"with\\xADout load\\xADing any thirds par\\xADties li\\xADbraries\"),\".\"),mdx(\"h2\",e({},{id:\"features\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#features\"})),\"Features\"),mdx(\"p\",null,\"The ac\\xADtu\\xADally sup\\xADported fea\\xADtures are the fol\\xADlow\\xADing (we reefer to Ope\\xADnAPI ver\\xADsion 3.0.0):\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Ope\\xADnAPI 3 com\\xADpli\\xADant API spec\\xADi\\xADfi\\xADca\\xADtion val\\xADi\\xADda\\xADtion with \",mdx(\"strong\",{parentName:\"li\"},\"load\\xADing of ex\\xADter\\xADnal Json schemas\")),mdx(\"li\",{parentName:\"ul\"},\"Au\\xADto\\xADmatic re\\xADquest val\\xADi\\xADda\\xADtion\"),mdx(\"li\",{parentName:\"ul\"},\"Au\\xADto\\xADmatic mount of se\\xADcu\\xADrity val\\xADi\\xADda\\xADtion han\\xADdlers\"),mdx(\"li\",{parentName:\"ul\"},\"Au\\xADto\\xADmatic 501 re\\xADsponse for not im\\xADple\\xADmented op\\xADer\\xADa\\xADtions\"),mdx(\"li\",{parentName:\"ul\"},\"Router fac\\xADtory to pro\\xADvide all this fea\\xADtures to users\")),mdx(\"p\",null,\"Au\\xADto\\xADmatic re\\xADquest val\\xADi\\xADda\\xADtion is pro\\xADvided by a new han\\xADdler: \",mdx(\"inlineCode\",{parentName:\"p\"},\"ValidationHandler\"),\". You can also de\\xADfine your own \",mdx(\"inlineCode\",{parentName:\"p\"},\"ValidationHandler\"),\" with\\xADout API spec\\xADi\\xADfi\\xADca\\xADtions, but I will dis\\xADcuss it later.\"),mdx(\"p\",null,\"The re\\xADquest val\\xADi\\xADda\\xADtion (pro\\xADvided by sub\\xADclass \",mdx(\"inlineCode\",{parentName:\"p\"},\"OpenAPI3RequestValidationHandler\"),\") ac\\xADtu\\xADally sup\\xADports:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Pa\\xADra\\xADme\\xADters de\\xADfined in \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://github.com/OAI/OpenAPI-Specification/blob/OpenAPI.next/versions/3.0.md#parameter-object\"}),\"Pa\\xADra\\xADme\\xADter ob\\xADject\"),\". We sup\\xADport every type of pa\\xADra\\xADme\\xADter, in\\xADclud\\xADing \",mdx(\"inlineCode\",{parentName:\"li\"},\"object\"),\" and \",mdx(\"inlineCode\",{parentName:\"li\"},\"array\"),\". We also sup\\xADport every type de\\xADscrip\\xADtion field (for ex\\xADam\\xADple \",mdx(\"inlineCode\",{parentName:\"li\"},\"format\"),\", \",mdx(\"inlineCode\",{parentName:\"li\"},\"minimum\"),\", \",mdx(\"inlineCode\",{parentName:\"li\"},\"maximum\"),\", etc). Also, at the mo\\xADment, we sup\\xADport every com\\xADbi\\xADna\\xADtion of \",mdx(\"inlineCode\",{parentName:\"li\"},\"style\"),\" and \",mdx(\"inlineCode\",{parentName:\"li\"},\"explode\"),\" field (ex\\xADcluded styles \",mdx(\"inlineCode\",{parentName:\"li\"},\"matrix\"),\" and \",mdx(\"inlineCode\",{parentName:\"li\"},\"label\"),\")\"),mdx(\"li\",{parentName:\"ul\"},\"Body de\\xADfined in new \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://github.com/OAI/OpenAPI-Specification/blob/OpenAPI.next/versions/3.0.md#request-body-object\"}),\"Re\\xADquest\\xADBody ob\\xADject\"),\". In par\\xADtic\\xADu\\xADlar:\",mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},\"For \",mdx(\"inlineCode\",{parentName:\"li\"},\"application/json\"),\" the val\\xADi\\xADda\\xADtion han\\xADdler will take schema that you have de\\xADfined in \",mdx(\"inlineCode\",{parentName:\"li\"},\"schema\"),\" ob\\xADject and will val\\xADi\\xADdate json bod\\xADies with it\"),mdx(\"li\",{parentName:\"ul\"},\"For \",mdx(\"inlineCode\",{parentName:\"li\"},\"application/x-www-form-urlencoded\"),\" and \",mdx(\"inlineCode\",{parentName:\"li\"},\"multipart/form-data\"),\" the val\\xADi\\xADda\\xADtion han\\xADdler will take care of val\\xADi\\xADdate every pa\\xADra\\xADme\\xADters in form at\\xADtrib\\xADutes. It ac\\xADtu\\xADally sup\\xADports only comma sep\\xADa\\xADrated val\\xADues for \",mdx(\"inlineCode\",{parentName:\"li\"},\"object\"),\" and \",mdx(\"inlineCode\",{parentName:\"li\"},\"arrays\")),mdx(\"li\",{parentName:\"ul\"},\"For other pa\\xADra\\xADme\\xADter types it will check \",mdx(\"inlineCode\",{parentName:\"li\"},\"Content-Type\"),\" header\")))),mdx(\"p\",null,\"Re\\xADquest val\\xADi\\xADda\\xADtion er\\xADrors will be car\\xADried with \",mdx(\"inlineCode\",{parentName:\"p\"},\"RoutingContext\"),\" en\\xADcap\\xADsu\\xADlated in an ob\\xADject called \",mdx(\"inlineCode\",{parentName:\"p\"},\"ValidationHandler\"),\", so you have to at\\xADtach fail\\xADure han\\xADdler to check if some\\xADthing went wrong dur\\xADing val\\xADi\\xADda\\xADtion. Also the \",mdx(\"inlineCode\",{parentName:\"p\"},\"RoutingContext\"),\" carry a new ob\\xADject called \",mdx(\"inlineCode\",{parentName:\"p\"},\"RequestParameters\"),\" that en\\xADcap\\xADsu\\xADlate all re\\xADquest pa\\xADra\\xADme\\xADters de\\xADse\\xADri\\xADal\\xADized and parsed.\"),mdx(\"p\",null,\"Router fac\\xADtory is in\\xADtended to give you a re\\xADally sim\\xADple user in\\xADter\\xADface to use Ope\\xADnAPI 3 sup\\xADport. Most im\\xADpor\\xADtant fea\\xADtures are:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Async load\\xADing of spec\\xADi\\xADfi\\xADca\\xADtion and its schema de\\xADpen\\xADden\\xADcies\"),mdx(\"li\",{parentName:\"ul\"},\"Au\\xADto\\xADmatic con\\xADvert Ope\\xADnAPI style paths to Vert.x style paths\"),mdx(\"li\",{parentName:\"ul\"},\"Lazy meth\\xADods: op\\xADer\\xADa\\xADtions (com\\xADbi\\xADna\\xADtion of paths and HTTP meth\\xADods) are mounted in de\\xADf\\xADi\\xADn\\xADi\\xADtion order in\\xADside spec\\xADi\\xADfi\\xADca\\xADtion\"),mdx(\"li\",{parentName:\"ul\"},\"Au\\xADto\\xADmatic mount of se\\xADcu\\xADrity val\\xADi\\xADda\\xADtion han\\xADdlers\")),mdx(\"p\",null,\"Also, it\\u2019s planned to re\\xADlease a \",mdx(\"strong\",{parentName:\"p\"},\"project skele\\xADton gen\\xADer\\xADa\\xADtor\"),\" based on API spec.\"),mdx(\"h2\",e({},{id:\"startup-your-project\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#startup-your-project\"})),\"Startup your project\"),mdx(\"p\",null,\"We are in a test\\xADing stage, so the vertx-\\u200Bweb of\\xADfi\\xADcial repo doesn\\u2019t con\\xADtain it. To in\\xADclude the mod\\xADi\\xADfied ver\\xADsion of vertx-\\u200Bweb re\\xADplace your vertx-\\u200Bweb maven de\\xADpen\\xADdency with this one:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-xml\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"dependency\"),\">\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"groupId\"),\">\"),\"io.vertx\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"groupId\"),\">\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"artifactId\"),\">\"),\"vertx-web-api-contract\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"artifactId\"),\">\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"version\"),\">\"),\"3.6.0\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"version\"),\">\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"dependency\"),\">\"),`\n`)),mdx(\"p\",null,\"Now you can start using Ope\\xADnAPI 3 in\\xADside your Vert.x pow\\xADered app!\"),mdx(\"p\",null,\"First of all you need to load the spec\\xADi\\xADfi\\xADca\\xADtion and con\\xADstruct the router fac\\xADtory:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Load the api spec. This operation is asynchronous\"),`\nOpenAPI3RouterFactory.create(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"this\"),\".vertx, \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"src/main/resources/petstore.yaml\"'),`, ar -> {\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),` (ar.succeeded()) {\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Spec loaded with success\"),`\n        OpenAPI3RouterFactory routerFactory = ar.result();\n    } `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"else\"),` {\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Something went wrong during router factory initialization\"),`\n        Throwable exception = ar.cause();\n        logger.error(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"Ops!\"'),`, exception);\n    }\n});\n`)),mdx(\"h2\",e({},{id:\"handlers-mounting\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#handlers-mounting\"})),\"Handlers mounting\"),mdx(\"p\",null,\"Now load han\\xADdlers to your op\\xADer\\xADa\\xADtions. Use \",mdx(\"inlineCode\",{parentName:\"p\"},\"addHandlerByOperationId(String operationId, Handler<RoutingContext> handler)\"),\" to add an han\\xADdler to a route that matches the \",mdx(\"inlineCode\",{parentName:\"p\"},\"operationId\"),\". To add a fail\\xADure han\\xADdler use \",mdx(\"inlineCode\",{parentName:\"p\"},\"addFailureHandlerByOperationId(String operationId, Handler<RoutingContext> failureHandler) \")),mdx(\"p\",null,\"You can, of course, \",mdx(\"strong\",{parentName:\"p\"},\"add mul\\xADti\\xADple han\\xADdlers to same op\\xADer\\xADa\\xADtion\"),\", with\\xADout over\\xADwrit\\xADing the ex\\xADist\\xADing ones.\"),mdx(\"p\",null,\"This is an ex\\xADam\\xADple of \",mdx(\"inlineCode\",{parentName:\"p\"},\"addHandlerByOperationId()\"),\":\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Add an handler with operationId\"),`\nrouterFactory.addHandlerByOperationId(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"listPets\"'),`, routingContext -> {\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Handle listPets operation (GET /pets)\"),`\n}, routingContext -> {\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Handle failure\"),`\n});\n`)),mdx(\"h2\",e({},{id:\"request-parameters\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#request-parameters\"})),\"Request parameters\"),mdx(\"p\",null,\"Now you can freely use re\\xADquest pa\\xADra\\xADme\\xADters. To get the \",mdx(\"inlineCode\",{parentName:\"p\"},\"RequestParameters\"),\" ob\\xADject:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),\"RequestParameters params = routingContext.get(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"parsedParameters\"'),`);\n`)),mdx(\"p\",null,\"The \",mdx(\"inlineCode\",{parentName:\"p\"},\"RequestParameters\"),\" ob\\xADject pro\\xADvides all meth\\xADods to ac\\xADcess to query, cookie, header, path, form and en\\xADtire body pa\\xADra\\xADme\\xADters. Here are some ex\\xADam\\xADples of how to use this ob\\xADject.\"),mdx(\"p\",null,\"Pa\\xADra\\xADme\\xADter with name \",mdx(\"inlineCode\",{parentName:\"p\"},\"awesomeParameter\"),\" with type \",mdx(\"inlineCode\",{parentName:\"p\"},\"integer\"),\" in \",mdx(\"inlineCode\",{parentName:\"p\"},\"query\"),\":\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),\"RequestParameter awesomeParameter = params.queryParameter(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"awesomeParameter\"'),`);\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (awesomeParameter != \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"null\"),`) {\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// awesomeParameter parameter exists, but we are not sure that is empty or not (query parameters can be empty with allowEmptyValue: true)\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),` (!awesomeParameter.isEmpty()) {\n      `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Now we are sure that it exists and it's not empty, so we can extract it\"),`\n      Integer awesome = awesomeParameter.getInteger();\n    } `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"else\"),` {\n      `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Parameter exists, but it's empty value\"),`\n    }\n} `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"else\"),` {\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Parameter doesn't exist (it's not required)\"),`\n}\n`)),mdx(\"p\",null,\"As you can see, every pa\\xADra\\xADme\\xADter is mapped in re\\xADspec\\xADtive ob\\xADjects (\",mdx(\"inlineCode\",{parentName:\"p\"},\"integer\"),\" in \",mdx(\"inlineCode\",{parentName:\"p\"},\"Integer\"),\", \",mdx(\"inlineCode\",{parentName:\"p\"},\"integer\"),\" with \",mdx(\"inlineCode\",{parentName:\"p\"},\"format: int64\"),\" in \",mdx(\"inlineCode\",{parentName:\"p\"},\"Long\"),\", \",mdx(\"inlineCode\",{parentName:\"p\"},\"float\"),\" in \",mdx(\"inlineCode\",{parentName:\"p\"},\"Float\"),\" and so on)\"),mdx(\"p\",null,\"Comma sep\\xADa\\xADrated array with name \",mdx(\"inlineCode\",{parentName:\"p\"},\"awesomeParameters\"),\" with type \",mdx(\"inlineCode\",{parentName:\"p\"},\"integer\"),\" in \",mdx(\"inlineCode\",{parentName:\"p\"},\"query\"),\":\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),\"RequestParameter awesomeParameters = params.queryParameter(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"awesomeParameters\"'),`);\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (awesomeParameters != \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"null\"),` && !awesomeParameters.isEmpty()) {\n    List<RequestParameter> awesomeList = awesomeParameters.getArray();\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"for\"),` (RequestParameter awesome : awesomeList) {\n      Integer a = awesome.getInteger();\n    }\n} `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"else\"),` {\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// awesomeParameters not found or empty string\"),`\n}\n`)),mdx(\"p\",null,\"JSON Body:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),`RequestParameter body = params.body();\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (body != \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"null\"),`)\n  JsonObject jsonBody = body.getJsonObject();\n`)),mdx(\"h2\",e({},{id:\"security-handling\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#security-handling\"})),\"Security handling\"),mdx(\"p\",null,\"You can mount only one se\\xADcu\\xADrity han\\xADdler for a com\\xADbi\\xADna\\xADtion of schema and scope.\"),mdx(\"p\",null,\"To add a se\\xADcu\\xADrity han\\xADdler only with a schema name:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),\"routerFactory.addSecurityHandler(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"security_scheme_name\"'),`, routingContext -> {\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Handle security here and then call next()\"),`\n    routingContext.next();\n});\n`)),mdx(\"p\",null,\"To add a se\\xADcu\\xADrity han\\xADdler with a com\\xADbi\\xADna\\xADtion of schema name and scope:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),\"routerFactory.addSecuritySchemaScopeValidator(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"security_scheme_name\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"scope_name\"'),`, routingContext -> {\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Handle security here and then call next()\"),`\n    routingContext.next();\n});\n`)),mdx(Alert,{info:!0,mdxType:\"Alert\"},mdx(\"p\",null,\"You can de\\xADfine se\\xADcu\\xADrity han\\xADdlers where you want but de\\xADfine it! | Dur\\xADing Router in\\xADstan\\xADti\\xADa\\xADtion, if fac\\xADtory finds a path that re\\xADquire a se\\xADcu\\xADrity schema with\\xADout an as\\xADsigned han\\xADdler, It will throw a \",mdx(\"inlineCode\",{parentName:\"p\"},\"RouterFactoryException\"))),mdx(\"h2\",e({},{id:\"error-handling\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#error-handling\"})),\"Error handling\"),mdx(\"p\",null,\"Every time you add an han\\xADdler for an op\\xADer\\xADa\\xADtion you can add a fail\\xADure han\\xADdler. To han\\xADdle a \",mdx(\"inlineCode\",{parentName:\"p\"},\"ValidationException\"),\":\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),`Throwable failure = routingContext.failure();\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (failure \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"instanceof\"),` ValidationException)\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Handle Validation Exception\"),`\n    routingContext.response().setStatusCode(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"400\"),\").setStatusMessage(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"ValidationError\"'),`).end(failure.getMessage());\n`)),mdx(\"p\",null,\"Also the router fac\\xADtory pro\\xADvides two other tools:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"It au\\xADto\\xADmat\\xADi\\xADcally mounts a 501 \",mdx(\"inlineCode\",{parentName:\"li\"},\"Not Implemented\"),\" han\\xADdler for op\\xADer\\xADa\\xADtions where you haven\\u2019t mounted any han\\xADdler\"),mdx(\"li\",{parentName:\"ul\"},\"It can load a de\\xADfault \",mdx(\"inlineCode\",{parentName:\"li\"},\"ValidationException\"),\" fail\\xADure han\\xADdler\")),mdx(\"p\",null,\"Both these op\\xADtions are con\\xADfig\\xADurable with \",mdx(Link,{href:\"/docs/apidocs/io/vertx/ext/web/api/contract/RouterFactoryOptions.html\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"RouterFactoryOptions\")))),mdx(\"h2\",e({},{id:\"and-now-use-it\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#and-now-use-it\"})),\"And now use it!\"),mdx(\"p\",null,\"Now you are ready to gen\\xADer\\xADate the \",mdx(\"inlineCode\",{parentName:\"p\"},\"Router\"),\"!\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),`Router router = routerFactory.getRouter();\n\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Now you can use your Router instance\"),`\nHttpServer server = vertx.createHttpServer(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),\" HttpServerOptions().setPort(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"8080\"),\").setHost(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"localhost\"'),`));\nserver.requestHandler(router::accept).listen();\n`)),mdx(Alert,{info:!0,title:\"Lazy methods!\",mdxType:\"Alert\"},mdx(\"p\",null,mdx(\"inlineCode\",{parentName:\"p\"},\"getRouter()\"),\" gen\\xADer\\xADate the \",mdx(\"inlineCode\",{parentName:\"p\"},\"Router\"),\" ob\\xADject, so you don\\u2019t have to care about code de\\xADf\\xADi\\xADn\\xADi\\xADtion order\")),mdx(\"h2\",e({},{id:\"and-now\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#and-now\"})),\"And now?\"),mdx(\"p\",null,\"You can find a com\\xADplete ex\\xADam\\xADple on \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/vert-x3/vertx-examples/tree/master/web-examples#http-request-validation-and-openapi-3-router-factory\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"vertx-examples\"))),mdx(\"p\",null,\"You can ac\\xADcess to \",mdx(Link,{href:\"/docs/#web\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),\"doc\\xADu\\xADmen\\xADta\\xADtion here\")),\" and \",mdx(Link,{href:\"/docs/apidocs/io/vertx/ext/web/api/contract/package-summary.html\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),\"Javadoc here\"))),mdx(Alert,{info:!0,title:\"We want you!\",mdxType:\"Alert\"},mdx(\"p\",null,\"Please give us your feed\\xADback open\\xADing an issue \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/slinkydeveloper/vertx-web/issues\"}),\"here\"))))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"prevPost":{"meta":{"title":"Vert.x 3.5.0.Beta1","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"It's summer time and we have just released Vert.x 3.5.0.Beta1!"},"date":"2017-08-10","slug":"vert-x-3-5-0-beta1"},"nextPost":{"meta":{"title":"Preview of a guide for Java developers","category":"news","authors":[{"name":"Julien Ponge","github_id":"jponge"}],"summary":"We are introducing the book “A gentle guide to asynchronous programming with Eclipse Vert.x for enterprise application developers”."},"date":"2017-06-09","slug":"preview-of-a-guide-for-java-developers"},"relatedPosts":[{"meta":{"title":"Things to keep in mind concerning CSRF attacks","category":"guides","authors":[{"name":"Xhelal Likaj","github_id":"xhlika"}],"summary":"Eclipse Vert.x like most frameworks provides an anti-CSRF defense. However, no framework can prevent all attack vectors that exist in the web. Therefore, developers need to be aware of some dangers and common attack vectors concerning CSRF defenses."},"date":"2021-01-23","slug":"eclipse-vert-x-CSRF-concerns"},{"meta":{"title":"Vert.x Web API Service Introduction","category":"guides","authors":[{"name":"Francesco Guardiani","github_id":"slinkydeveloper"}],"summary":"This blog post teaches you how to use the new module vertx-web-api-service to combine the Web Router and the OpenAPI Router Factory with service proxies."},"date":"2018-12-13","slug":"vert-x-web-api-service-introduction"},{"meta":{"title":"Real-time bidding with Websockets and Vert.x","category":"guides","authors":[{"name":"Marcin Warczyglowa","github_id":"mwarc"}],"summary":"The expectations of users for interactivity with web applications have changed over the past few years.\n    Users during bidding in auction no longer want to press the refresh button."},"date":"2016-01-15","slug":"real-time-bidding-with-websockets-and-vert-x"}]},"__N_SSG":true}