{"pageProps":{"categories":["releases","guides","security","news"],"post":{"meta":{"title":"Eclipse Vert.x 4 beta 3 released!","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"The third beta version of Eclipse Vert.x 4.0 highlights many features including (but not limited to) HTTP client request creation, HTTP tunnel improvements, and WebSocket upgrade improvements."},"date":"2020-09-25","slug":"eclipse-vert-x-4-beta-3-released","readingTime":{"text":"4 min read","minutes":3.51,"time":210600,"words":702},"content":{"compiledSource":"var d=Object.defineProperty,h=Object.defineProperties;var m=Object.getOwnPropertyDescriptors;var r=Object.getOwnPropertySymbols;var o=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;var i=(a,t,s)=>t in a?d(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,e=(a,t)=>{for(var s in t||(t={}))o.call(t,s)&&i(a,s,t[s]);if(r)for(var s of r(t))p.call(t,s)&&i(a,s,t[s]);return a},l=(a,t)=>h(a,m(t));var c=(a,t)=>{var s={};for(var n in a)o.call(a,n)&&t.indexOf(n)<0&&(s[n]=a[n]);if(a!=null&&r)for(var n of r(a))t.indexOf(n)<0&&p.call(a,n)&&(s[n]=a[n]);return s};const makeShortcode=a=>function(s){return console.warn(\"Component \"+a+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",e({},s))},Link=makeShortcode(\"Link\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(s){var n=s,{components:a}=n,t=c(n,[\"components\"]);return mdx(MDXLayout,l(e(e({},layoutProps),t),{components:a,mdxType:\"MDXLayout\"}),mdx(\"p\",null,\"We are ex\\xADtremely pleased to an\\xADnounce the third 4.0 beta re\\xADlease of Eclipse Vert.x.\"),mdx(\"p\",null,\"Vert.x 4 is the evo\\xADlu\\xADtion of the Vert.x 3.x se\\xADries that will bring key fea\\xADtures to Vert.x.\"),mdx(\"h2\",e({},{id:\"http-client-request-creation\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#http-client-request-creation\"})),\"HTTP client request creation\"),mdx(\"p\",null,`Until Beta3, HTTP client has cre\\xADated lazy HTTP re\\xADquests, since then cre\\xADat\\xADing a re\\xADquest\nhas be\\xADcome an asyn\\xADchro\\xADnous op\\xADer\\xADa\\xADtion guar\\xADan\\xADtee\\xADing that a slot for per\\xADform\\xADing the re\\xADquest\nis granted:`),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Created a request\"),`\nHttpClientRequest request = client.get(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"/some-uri\"'),`);\n\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Connect to the server or reuse a connection from the pool and then try to send the request\"),`\nrequest.end();\n\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Since Beta3\"),`\nclient.get(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"/some-uri\"'),`, ar -> {\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// The client connected to the server or reused a connection from the pool\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),` (ar.succeeded()) {\n    HttpClientRequest request = ar.result();\n\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Send the request\"),`\n    request.end();\n  }\n});\n`)),mdx(\"p\",null,`An\\xADother (hid\\xADden) mo\\xADti\\xADva\\xADtion to switch to this model is avoid\\xADing data races when the\nHTTP client is used out\\xADside the event-\\u200Bloop using fu\\xADtures.`),mdx(\"p\",null,\"Pre\\xADvi\\xADously, you could write code like:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),\"Future<HttpClientResponse> get = client.get(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"some-uri\"'),`);\n\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Assuming we have a client that returns a future response\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// assuging this is *not* on the event-loop\"),`\nFuture<Buffer> fut = get.send().compose(response -> {\n\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Response events might have happen already\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),` response.body();\n});\n`)),mdx(\"p\",null,\"Now, you can write in\\xADstead:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),\"Future<Buffer> fut = client.get(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"some-uri\"'),`).compose(request -> {\n  request.send().compose(response -> response.body())\n});\n`)),mdx(\"h2\",e({},{id:\"httpserverresponse-send-method\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#httpserverresponse-send-method\"})),\"HttpServerResponse send method\"),mdx(\"p\",null,\"In the pre\\xADvi\\xADous beta, HTTP client re\\xADquest got a new sim\\xADpli\\xADfied \",mdx(\"inlineCode\",{parentName:\"p\"},\"send\"),` method to send\na body or a stream. We did the same for the HTTP server re\\xADsponse API:`),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),`server.requestHandler(req -> {\n  req.pause();\n  getSomeStream().onSuccess(stream -> {\n    req.response().send(stream);\n  });\n});\n`)),mdx(\"h2\",e({},{id:\"http-tunnel-improvements\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#http-tunnel-improvements\"})),\"HTTP tunnel improvements\"),mdx(\"p\",null,\"Cre\\xADat\\xADing an HTTP tun\\xADnel has now be\\xADcome more nat\\xADural:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),\"client.request(HttpMethod.CONNECT, \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"some-uri\"'),`)\n  .onSuccess(request -> {\n\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Connect to the server\"),`\n    request.connect(ar -> {\n      `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),` (ar.succeeded()) {\n        HttpClientResponse response = ar.result();\n\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (response.statusCode() != \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"200\"),`) {\n          `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Connect failed for some reason\"),`\n        } `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"else\"),` {\n          `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Tunnel created, raw buffers are transmitted on the wire\"),`\n          NetSocket socket = response.netSocket();\n        }\n      }\n    });\n});\n`)),mdx(\"p\",null,\"The new \",mdx(\"inlineCode\",{parentName:\"p\"},\"connect\"),\" method tells the client that when a \",mdx(\"inlineCode\",{parentName:\"p\"},\"201\"),` re\\xADsponse is re\\xADceived\nfrom the server then the con\\xADnec\\xADtion should be switched to not in\\xADter\\xADpret HTTP\ndata any\\xADmore.`),mdx(\"p\",null,\"On the server, the API has be\\xADcome asyn\\xADchro\\xADnous and re\\xADnamed to \",mdx(\"inlineCode\",{parentName:\"p\"},\"toNetSocket()\"),\":\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),`server.requestHandler(request -> {\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),` (request.method() == HttpMethod.CONNECT) {\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Will send an HTTP 201 status code and switch the connection to use raw buffers\"),`\n    request.toNetSocket(ar -> {\n      `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),` (ar.succeeded()) {\n        NetSocket socket = ar.result();\n      }\n    });\n  }\n});\n`)),mdx(\"h2\",e({},{id:\"websocket-upgrade-improvements\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#websocket-upgrade-improvements\"})),\"WebSocket upgrade improvements\"),mdx(\"p\",null,`The server Web\\xADSocket man\\xADual up\\xADgrade op\\xADer\\xADa\\xADtion has also be\\xADcome asyn\\xADchro\\xADnous and re\\xADnamed\nto `,mdx(\"inlineCode\",{parentName:\"p\"},\"toWebSocket()\")),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),`server.requestHandler(request -> {\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (request.method() == HttpMethod.GET && \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"Upgrade\"'),\".equals(request.getHeader(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"connection\"'),`))) {\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Will do the WebSocket handshake\"),`\n    request.toWebSocket(ar -> {\n      `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),` (ar.succeeded()) {\n        ServerWebSocket socket = ar.result();\n      }\n    });\n  }\n});\n`)),mdx(\"h2\",e({},{id:\"row-to-json-conversion\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#row-to-json-conversion\"})),\"Row to JSON conversion\"),mdx(\"p\",null,\"SQL client can now eas\\xADily trans\\xADform a \",mdx(\"inlineCode\",{parentName:\"p\"},\"Row\"),` into a JSON ob\\xADject, this can be con\\xADvie\\xADnient\nfor ap\\xADpli\\xADca\\xADtions di\\xADrectly trans\\xADfer\\xADring JSON re\\xADsults to the client:`),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),`client\n  .preparedQuery(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"SELECT * FROM USERS WHERE ID=$1\"'),`)\n  .execute(Tuple.of(id))\n  .onSuccess(row -> {\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (row.size() == \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),`) {\n      JsonObject json = row.iterator().next().toJson();\n    }\n  });\n`)),mdx(\"h2\",e({},{id:\"oauth2oidc-pkce\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#oauth2oidc-pkce\"})),\"OAuth2/OIDC PKCE\"),mdx(\"p\",null,mdx(\"inlineCode\",{parentName:\"p\"},\"OAuth2Handler\"),\" can now han\\xADdle \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://tools.ietf.org/html/rfc7636\"}),\"PKCE\"),\", which means an\\xADother layer of se\\xADcu\\xADrity to your ap\\xADpli\\xADca\\xADtion.\"),mdx(\"h2\",e({},{id:\"redis-resp3\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#redis-resp3\"})),\"Redis RESP3\"),mdx(\"p\",null,\"The redis client can now speak \",mdx(\"inlineCode\",{parentName:\"p\"},\"RESP3\"),\" with redis servers. This means it can han\\xADdle all the new types and APIs avail\\xADable on redis from all ver\\xADsions (RESP2, redis < 6) and (RESP3, redis >= 6).\"),mdx(\"h2\",e({},{id:\"finally\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#finally\"})),\"Finally\"),mdx(\"p\",null,\"This is the Beta3 re\\xADlase of Vert.x 4, you can of course ex\\xADpect an\\xADother beta as we get feed\\xADback from the com\\xADmu\\xADnity and fix is\\xADsues that we failed to catch be\\xADfore.\"),mdx(\"p\",null,\"You can also read the mile\\xADstone an\\xADnounces to know more about the over\\xADral changes:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(Link,{href:\"/blog/eclipse-vert-x-4-beta-1-released\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"li\"},{href:\"\"}),\"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bbeta-1-\\u200Breleased\"))),mdx(\"li\",{parentName:\"ul\"},mdx(Link,{href:\"/blog/eclipse-vert-x-4-milestone-5-released\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"li\"},{href:\"\"}),\"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-5-\\u200Breleased\"))),mdx(\"li\",{parentName:\"ul\"},mdx(Link,{href:\"/blog/eclipse-vert-x-4-milestone-5-released\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"li\"},{href:\"\"}),\"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-5-\\u200Breleased\"))),mdx(\"li\",{parentName:\"ul\"},mdx(Link,{href:\"/blog/eclipse-vert-x-4-milestone-4-released\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"li\"},{href:\"\"}),\"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-4-\\u200Breleased\"))),mdx(\"li\",{parentName:\"ul\"},mdx(Link,{href:\"/blog/eclipse-vert-x-4-milestone-3-released\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"li\"},{href:\"\"}),\"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-3-\\u200Breleased\"))),mdx(\"li\",{parentName:\"ul\"},mdx(Link,{href:\"/blog/eclipse-vert-x-4-milestone-2-released\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"li\"},{href:\"\"}),\"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-2-\\u200Breleased\"))),mdx(\"li\",{parentName:\"ul\"},mdx(Link,{href:\"/blog/eclipse-vert-x-4-milestone-1-released\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"li\"},{href:\"\"}),\"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-1-\\u200Breleased\")))),mdx(\"p\",null,\"The \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/vert-x3/wiki/wiki/4.0.0-Deprecations-and-breaking-changes\"}),\"dep\\xADre\\xADca\\xADtions and break\\xADing changes\"),`\ncan be found on the wiki.`),mdx(\"p\",null,\"For this re\\xADlease, there are no Docker im\\xADages.\"),mdx(\"p\",null,\"The re\\xADlease ar\\xADti\\xADfacts have been de\\xADployed to \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://search.maven.org/search?q=g:io.vertx%20AND%20v:4.0.0.Beta1\"}),\"Maven Cen\\xADtral\"),\" and you can get the dis\\xADtri\\xADb\\xADu\\xADtion on \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://repo1.maven.org/maven2/io/vertx/vertx-stack-manager/4.0.0.Beta1/\"}),\"Maven Cen\\xADtral\"),\".\"),mdx(\"p\",null,\"You can boot\\xADstrap a Vert.x 4.0.0.Beta3 project using \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://start.vertx.io\"}),\"https://start.vertx.io\"),\".\"),mdx(\"p\",null,\"The doc\\xADu\\xADmen\\xADta\\xADtion has been de\\xADployed on this pre\\xADview web-\\u200Bsite \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://vertx-web-site.github.io/docs/\"}),\"https://vertx-\\u200Bweb-site.github.io/docs/\")),mdx(\"p\",null,\"That\\u2019s it! Happy cod\\xADing and see you soon on our user or dev \",mdx(Link,{href:\"/community\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),\"chan\\xADnels\")),\".\"))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"prevPost":{"meta":{"title":"JWT Authorization for Vert.x with Keycloak","category":"guides","authors":[{"name":"Thomas Darimont","github_id":"thomasdarimont"}],"summary":"In this blog post, you'll learn about JWT foundations, protect routes with JWT Authorization, JWT encoded tokens, and RBAC with Keycloak"},"date":"2020-10-01","slug":"jwt-authorization-for-vert-x-with-keycloak"},"nextPost":{"meta":{"title":"Eclipse Vert.x 3.9.3 released!","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"Eclipse Vert.x version 3.9.3 has just been released. It fixes quite a few bugs that have been reported by the community."},"date":"2020-09-17","slug":"eclipse-vert-x-3-9-3-released"},"relatedPosts":[{"meta":{"title":"Things to keep in mind concerning CSRF attacks","category":"guides","authors":[{"name":"Xhelal Likaj","github_id":"xhlika"}],"summary":"Eclipse Vert.x like most frameworks provides an anti-CSRF defense. However, no framework can prevent all attack vectors that exist in the web. Therefore, developers need to be aware of some dangers and common attack vectors concerning CSRF defenses."},"date":"2021-01-23","slug":"eclipse-vert-x-CSRF-concerns"},{"meta":{"title":"Real-time bidding with Websockets and Vert.x","category":"guides","authors":[{"name":"Marcin Warczyglowa","github_id":"mwarc"}],"summary":"The expectations of users for interactivity with web applications have changed over the past few years.\n    Users during bidding in auction no longer want to press the refresh button."},"date":"2016-01-15","slug":"real-time-bidding-with-websockets-and-vert-x"},{"meta":{"title":"Some Rest with Vert.x","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"This post is part of the Introduction to Vert.x series. Letâ€™s go a bit further this time and develop a CRUD-ish application"},"date":"2015-07-27","slug":"some-rest-with-vert-x"}]},"__N_SSG":true}