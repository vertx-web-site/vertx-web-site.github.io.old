{"pageProps":{"categories":["releases","guides","security","news"],"post":{"meta":{"title":"Eclipse Vert.x 3.7.0 released!","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"We are extremely pleased to announce that the Eclipse Vert.x version 3.7.0 has been released."},"date":"2019-04-02","slug":"eclipse-vert-x-3-7-0-released","readingTime":{"text":"8 min read","minutes":7.65,"time":459000,"words":1530},"content":{"compiledSource":"var c=Object.defineProperty,d=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var r=Object.getOwnPropertySymbols;var p=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;var o=(a,n,s)=>n in a?c(a,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[n]=s,e=(a,n)=>{for(var s in n||(n={}))p.call(n,s)&&o(a,s,n[s]);if(r)for(var s of r(n))l.call(n,s)&&o(a,s,n[s]);return a},i=(a,n)=>d(a,h(n));var m=(a,n)=>{var s={};for(var t in a)p.call(a,t)&&n.indexOf(t)<0&&(s[t]=a[t]);if(a!=null&&r)for(var t of r(a))n.indexOf(t)<0&&l.call(a,t)&&(s[t]=a[t]);return s};const makeShortcode=a=>function(s){return console.warn(\"Component \"+a+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",e({},s))},ScrollLink=makeShortcode(\"ScrollLink\"),Link=makeShortcode(\"Link\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(s){var t=s,{components:a}=t,n=m(t,[\"components\"]);return mdx(MDXLayout,i(e(e({},layoutProps),n),{components:a,mdxType:\"MDXLayout\"}),mdx(\"p\",null,\"We are ex\\xADtremely pleased to an\\xADnounce that the Eclipse Vert.x ver\\xADsion 3.7.0 has been re\\xADleased.\"),mdx(\"p\",null,\"It is an ex\\xADcit\\xADing mile\\xADstone for a cou\\xADple of rea\\xADsons:\"),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},\"it comes with great new fea\\xADtures like the \",mdx(ScrollLink,{href:\"#vertx-web-graphql\",mdxType:\"ScrollLink\"},\"GraphQL ex\\xADten\\xADsion for Vert.x Web\"),\".\"),mdx(\"li\",{parentName:\"ol\"},\"this is the last minor ver\\xADsion be\\xADfore Vert.x 4! \")),mdx(\"p\",null,`Be\\xADfore we go throught the most no\\xADtable new fea\\xADtures, we would like to thank all the con\\xADtrib\\xADu\\xADtors.\nYour par\\xADtic\\xADi\\xADpa\\xADtion has been es\\xADsen\\xADtial to this achieve\\xADment.`),mdx(\"h2\",e({},{id:\"vertx-web-graphql\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#vertx-web-graphql\"})),\"Vert.x Web GraphQL\"),mdx(\"p\",null,\"Vert.x Web GraphQL ex\\xADtends Vert.x Web with the \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.graphql-java.com\"}),\"GraphQL-\\u200BJava\"),\" li\\xADbrary so that you can build a GraphQL server.\"),mdx(\"p\",null,\"To use this new mod\\xADule, add the fol\\xADlow\\xADing to the \",mdx(\"em\",{parentName:\"p\"},\"de\\xADpen\\xADden\\xADcies\"),\" sec\\xADtion of your Maven POM file:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-xml\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"dependency\"),\">\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"groupId\"),\">\"),\"io.vertx\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"groupId\"),\">\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"artifactId\"),\">\"),\"vertx-web-graphql\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"artifactId\"),\">\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"version\"),\">\"),\"3.7.0\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"version\"),\">\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"dependency\"),\">\"),`\n`)),mdx(\"p\",null,\"Or, if you use Gra\\xADdle:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-gradle\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"compile\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),\"'io.vertx:vertx-web-graphql:3.7.0'\"),`\n`)),mdx(\"p\",null,\"Then cre\\xADate a Vert.x Web \",mdx(\"inlineCode\",{parentName:\"p\"},\"Route\"),\" and a \",mdx(\"inlineCode\",{parentName:\"p\"},\"GraphQLHandler\"),\" for it:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Setup the GraphQL-Java object\"),`\nGraphQL graphQL = setupGraphQLJava();\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Use it to handle requests on a Vert.x Web route \"),`\nrouter.route(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"/graphql\"'),`).handler(GraphQLHandler.create(graphQL));\n`)),mdx(\"p\",null,\"The GraphQL han\\xADdler sup\\xADports out of the box:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"query con\\xADtext cus\\xADtomiza\\xADtion\"),mdx(\"li\",{parentName:\"ul\"},\"GraphQL-\\u200BJava data load\\xADers\"),mdx(\"li\",{parentName:\"ul\"},\"batch\\xADing on \",mdx(\"inlineCode\",{parentName:\"li\"},\"POST\"),\" re\\xADquests (com\\xADpat\\xADi\\xADble with the \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://www.apollographql.com/docs/link/links/batch-http.html\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"apollo-link-batch-http\")),\" trans\\xADport)\")),mdx(\"p\",null,\"For de\\xADtailed usage in\\xADstruc\\xADtions, please refer to the \",mdx(Link,{href:\"/docs/vertx-web-graphql/java/\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),\"Vert.x Web GraphQL doc\\xADu\\xADmen\\xADta\\xADtion\")),\".\"),mdx(\"h2\",e({},{id:\"vertx-cassandra-client\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#vertx-cassandra-client\"})),\"Vert.x Cassandra Client\"),mdx(\"h3\",e({},{id:\"object-mapper-support\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#object-mapper-support\"})),\"Object mapper support\"),mdx(\"p\",null,\"Vert.x Cas\\xADsan\\xADdra Client now sup\\xADports the \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/datastax/java-driver/tree/3.x/manual/object_mapper\"}),\"cassandra-\\u200Bdriver-mapping\"),\" mod\\xADule.\"),mdx(\"p\",null,\"To en\\xADable this fea\\xADture, you need to up\\xADdate your class\\xADpath by adding:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-xml\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"dependency\"),\">\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"groupId\"),\">\"),\"com.datastax.cassandra\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"groupId\"),\">\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"artifactId\"),\">\"),\"cassandra-driver-mapping\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"artifactId\"),\">\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"version\"),\">\"),\"3.7.1\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"version\"),\">\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"dependency\"),\">\"),`\n`)),mdx(\"p\",null,\"Then for a given en\\xADtity: \"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-meta\"}),'@Table(keyspace = \"test\", name = \"users\")'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-class\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"class\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"User\"),\" \"),`{\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-meta\"}),\"@PartitionKey\"),` String name;\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// ... other fields and methods \"),`\n}\n`)),mdx(\"p\",null,\"You can re\\xADtrieve a map\\xADper and ex\\xADe\\xADcute CRUD op\\xADer\\xADa\\xADtions:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),`VertxMappingManager manager = VertxMappingManager.create(cassandraClient);\nVertxMapper<User> mapper = manager.mapper(User.class, vertx);\nmapper.save(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),\" User(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"john\"'),`, hander -> {}));\n`)),mdx(\"h3\",e({},{id:\"collector-api\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#collector-api\"})),\"Collector API\"),mdx(\"p\",null,\"The fea\\xADture al\\xADlows to use Java \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collector.html\"}),\"col\\xADlec\\xADtors\"),\" for query re\\xADsults:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Create a collector projecting a row set to a string in the form (last_name_1,last_name_2,...)\"),`\nCollector<Row, ?, String> collector = Collectors.mapping(\n    row -> row.getString(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"last_name\"'),`),\n    Collectors.joining(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\",\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"(\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\")\"'),`)\n);\n\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Run the query with the collector\"),`\nclient.execute(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"SELECT * FROM users\"'),`, collector, ar -> {\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),` (ar.succeeded()) {\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Result in the form (last_name_1,last_name_2,...)\"),`\n    String result = ar.result();\n  } `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"else\"),` {\n    System.out.println(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"Failure: \"'),` + ar.cause().getMessage());\n  }\n});\n`)),mdx(\"h3\",e({},{id:\"cursor-api\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#cursor-api\"})),\"Cursor API\"),mdx(\"p\",null,\"The \",mdx(\"inlineCode\",{parentName:\"p\"},\"ResultSet\"),\" ob\\xADject has been en\\xADhanced with \",mdx(\"inlineCode\",{parentName:\"p\"},\"ResultSet#several\"),\" method, al\\xADlow\\xADing you to ob\\xADtain sev\\xADeral rows at once:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),\"resultSet.several(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"30\"),`, ar -> {\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),` (ar.succeeded()) {\n    List<Row> result = ar.result();\n  } `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"else\"),` {\n    System.out.println(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"Failure: \"'),` + ar.cause().getMessage());\n  }\n});\n`)),mdx(\"p\",null,\"A very use\\xADful fea\\xADture for re\\xADsult batch it\\xADer\\xADa\\xADtions with\\xADout re\\xADsort\\xADing to stream\\xADing or fetch\\xADing all rows in mem\\xADory.\"),mdx(\"h3\",e({},{id:\"client-lifecyle\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#client-lifecyle\"})),\"Client lifecyle\"),mdx(\"p\",null,\"The client life\\xADcyle has been re\\xADvis\\xADited in 3.7.\"),mdx(\"p\",null,\"Pre\\xADvi\\xADously users ex\\xADpected to \",mdx(\"inlineCode\",{parentName:\"p\"},\"connect\"),\" man\\xADu\\xADally be\\xADfore send\\xADing re\\xADquests. It was also pos\\xADsi\\xADble to \",mdx(\"inlineCode\",{parentName:\"p\"},\"disconnect\"),` a shared client\nthus fail\\xADing re\\xADquests sent from an\\xADother ver\\xADti\\xADcle or part of the ap\\xADpli\\xADca\\xADtion.`),mdx(\"p\",null,\"Now it is no longer re\\xADquired to man\\xADu\\xADally con\\xADnect a client (in fact, the method has been re\\xADmoved).\"),mdx(\"p\",null,\"As soon as you re\\xADtrieve an in\\xADstance you can start using it, the life\\xADcyle is au\\xADto\\xADmat\\xADi\\xADcally man\\xADaged:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),\"CassandraClientOptions options = \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),` CassandraClientOptions()\n  .addContactPoint(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"node1.address\"'),`)\n  .addContactPoint(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"node2.address\"'),`)\n  .addContactPoint(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"node3.address\"'),`)\n  .setKeyspace(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"my_keyspace\"'),`);\nCassandraClient sharedClient = CassandraClient.createShared(vertx, `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"sharedClientName\"'),`, options);\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Start sending requests to Cassandra with the client instance\"),`\n`)),mdx(\"p\",null,\"Sim\\xADi\\xADlarly, when the new \",mdx(\"inlineCode\",{parentName:\"p\"},\"close\"),\" method is in\\xADvoked on a shared client, only the last ac\\xADtive in\\xADstance will ac\\xADtu\\xADally dis\\xADcon\\xADnect from Cas\\xADsan\\xADdra:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Disconnects only if this is the last running instance of the shared client\"),`\nsharedClient.close();\n`)),mdx(\"h2\",e({},{id:\"vertx-redis-client\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#vertx-redis-client\"})),\"Vert.x Redis Client\"),mdx(\"p\",null,\"The Vert.x Redis client has been re\\xADworked in\\xADter\\xADnally and pro\\xADvides now a new (more evo\\xADlu\\xADtion friendly) API.\"),mdx(\"p\",null,`The cur\\xADrent API had the lim\\xADi\\xADta\\xADtion of being man\\xADu\\xADally crafted after the redis API and in\\xADvolved many non con\\xADtro\\xADlable fea\\xADtures\nsuch as auto re\\xADcon\\xADnect, un\\xADlim\\xADited buffer\\xADing of re\\xADquests, etc\\u2026 The new API of\\xADfers a more `,mdx(\"em\",{parentName:\"p\"},\"vert.x-y\"),\" ex\\xADpe\\xADri\\xADence.\"),mdx(\"p\",null,\"It just ex\\xADposes the base client:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),`Redis\n  .createClient(vertx, inetSocketAddress(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"7006\"),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"127.0.0.1\"'),`))\n  .connect(create -> {\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"final\"),` Redis redis = create.result();\n\n    redis.send(Request.cmd(Command.PING), send -> {\n      `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// ... should reply with PONG\"),`\n    });\n  });\n`)),mdx(\"p\",null,\"This has the ben\\xADe\\xADfits that you can now con\\xADnect to Redis in any of it\\u2019s op\\xADer\\xADa\\xADtion modes:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Sin\\xADgle server\"),mdx(\"li\",{parentName:\"ul\"},\"HA mode\"),mdx(\"li\",{parentName:\"ul\"},\"Clus\\xADter mode\")),mdx(\"p\",null,\"The API is de\\xADcou\\xADpled from the hand\\xADcrafted com\\xADmands, which means that you can use new fea\\xADtures such as:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"https://redis.io/commands#stream\"}),\"streams\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"https://redis.io/commands#hyperloglog\"}),\"hy\\xADper\\xADloglog\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"https://github.com/RedisLabsModules\"}),\"any ex\\xADten\\xADsion mod\\xADule\"))),mdx(\"p\",null,\"A gen\\xADer\\xADated helper \",mdx(\"inlineCode\",{parentName:\"p\"},\"RedisAPI\"),\" is avail\\xADable that can wrap the client to pro\\xADvide a sim\\xADi\\xADlar ex\\xADpe\\xADri\\xADence to the old API.\"),mdx(\"p\",null,\"The main dif\\xADfer\\xADence is that this new wrap\\xADper is gen\\xADer\\xADated from the \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://redis.io/commands/command\"}),\"COM\\xADMAND\"),` com\\xADmand,\nso the cor\\xADrect API it al\\xADways ex\\xADposed:`),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),`RedisAPI redis = RedisAPI.api(client);\n\nredis.set(Arrays.asList(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"key1\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"value1\"'),`), set -> {\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// ...\"),`\n});\n`)),mdx(\"h2\",e({},{id:\"vertx-amqp-client\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#vertx-amqp-client\"})),\"Vert.x AMQP Client\"),mdx(\"p\",null,`The Vert.x AMQP client al\\xADlows re\\xADceiv\\xADing and send\\xADing AMQP mes\\xADsages. It su\\xADper\\xADsedes the cur\\xADrent AMQP bridge and pro\\xADvide an API more\nflex\\xADi\\xADble and very much user-\\u200Bfriendly.`),mdx(\"p\",null,\"The Vert.x AMQP client al\\xADlows:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Con\\xADnect\\xADing to an AMQP bro\\xADker or router - SASL and TLS con\\xADnec\\xADtions are sup\\xADported\"),mdx(\"li\",{parentName:\"ul\"},\"Con\\xADsum\\xADing mes\\xADsage from a queue or a topic\"),mdx(\"li\",{parentName:\"ul\"},\"Send\\xADing mes\\xADsages to a queue or a topic\"),mdx(\"li\",{parentName:\"ul\"},\"Check\\xADing ac\\xADknowl\\xADedge\\xADment for sent mes\\xADsages\")),mdx(\"p\",null,`The AMQP 1.0 pro\\xADto\\xADcol sup\\xADport durable sub\\xADscrip\\xADtions, per\\xADsis\\xADtence, se\\xADcu\\xADrity, con\\xADver\\xADsa\\xADtions, so\\xADphis\\xADti\\xADcated rout\\xADing\\u2026 More\nde\\xADtails on the pro\\xADto\\xADcol can be found on the `,mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.amqp.org/\"}),\"AMQP home\\xADpage\"),\".\"),mdx(\"p\",null,`The Vert.x AMQP client is based on Vert.x Pro\\xADton. If you need fine-\\u200Bgrain con\\xADtrol, we rec\\xADom\\xADmend using\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/vert-x3/vertx-proton\"}),\"Vert.x Pro\\xADton\"),\" di\\xADrectly.\"),mdx(\"p\",null,\"To use this new mod\\xADule, add the fol\\xADlow\\xADing to the \",mdx(\"em\",{parentName:\"p\"},\"de\\xADpen\\xADden\\xADcies\"),\" sec\\xADtion of your Maven POM file:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-xml\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"dependency\"),\">\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"groupId\"),\">\"),\"io.vertx\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"groupId\"),\">\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"artifactId\"),\">\"),\"vertx-amqp-client\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"artifactId\"),\">\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"version\"),\">\"),\"3.7.0\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"version\"),\">\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"dependency\"),\">\"),`\n`)),mdx(\"p\",null,\"Or, if you use Gra\\xADdle:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-gradle\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"compile\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),\"'io.vertx:vertx-amqp-client:3.7.0'\"),`\n`)),mdx(\"p\",null,\"Then, you can con\\xADnect to an AMQP bro\\xADker:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),\"AmqpClientOptions options = \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),` AmqpClientOptions()\n      .setHost(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"localhost\"'),`)\n      .setPort(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"5672\"),`)\n      .setUsername(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"user\"'),`)\n      .setPassword(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"secret\"'),`);\n    \nAmqpClient client = AmqpClient.create(vertx, options);\n\nclient.connect(ar -> {\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),` (ar.failed()) {\n    System.out.println(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"Unable to connect to the broker\"'),`);\n  } `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"else\"),` {\n    System.out.println(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"Connection succeeded\"'),`);\n    AmqpConnection connection = ar.result();\n\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// You can create receivers and senders\"),`\n    connection.createReceiver(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"my-queue\"'),`,\n      msg -> {\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// called on every received messages\"),`\n        System.out.println(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"Received \"'),` + msg.bodyAsString());\n      },\n      done -> {\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),` (done.failed()) {\n          System.out.println(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"Unable to create receiver\"'),`);\n        } `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"else\"),` {\n          AmqpReceiver receiver = done.result();\n        }\n      }\n    );\n\n    connection.createSender(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"my-queue\"'),`, done -> {\n      `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),` (done.failed()) {\n        System.out.println(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"Unable to create a sender\"'),`);\n      } `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"else\"),` {\n        AmqpSender sender = done.result();\n        sender.send(AmqpMessage.create().withBody(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"hello\"'),`).build());\n      }\n    });\n\n  }\n});\n`)),mdx(\"h2\",e({},{id:\"stream-pipes\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#stream-pipes\"})),\"Stream pipes\"),mdx(\"p\",null,\"When it comes to stream\\xADing, back-\\u200Bpressure is some\\xADthing you need to care about.\"),mdx(\"p\",null,\"You have very much likely heard or used the Vert.x \",mdx(\"inlineCode\",{parentName:\"p\"},\"Pump\"),` API to trans\\xADfer data from a read stream to a write stream while\nre\\xADspect\\xADing the write stream back-\\u200Bpressure.`),mdx(\"p\",null,\"The \",mdx(\"inlineCode\",{parentName:\"p\"},\"Pipe\"),\" a new API su\\xADper\\xADsed\\xADing the \",mdx(\"inlineCode\",{parentName:\"p\"},\"Pump\"),\" to achieve the same ef\\xADfect and even more, it acts like a pump and han\\xADdles for you\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"read stream pause/re\\xADsume\"),mdx(\"li\",{parentName:\"ul\"},\"write stream ter\\xADmi\\xADna\\xADtion\"),mdx(\"li\",{parentName:\"ul\"},\"stream fail\\xADures han\\xADdling\"),mdx(\"li\",{parentName:\"ul\"},\"asyn\\xADchro\\xADnous re\\xADsult upon stream\\xADing com\\xADple\\xADtion\")),mdx(\"p\",null,\"You can trans\\xADfer a read stream to a write stream sim\\xADply, the write stream will be ended upon com\\xADple\\xADtion of the stream\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),`readStream.pipeTo(writeStream);\n`)),mdx(\"p\",null,\"You can also be no\\xADti\\xADfied when the pipe com\\xADpletes:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),`readStream.pipeTo(writeStream, ar -> {\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),` (ar.succeeded()) {\n    System.out.println(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"done\"'),`);\n  } `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"else\"),` {\n    System.out.println(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"failed \"'),` + ar.cause());\n  }\n});\n`)),mdx(\"p\",null,\"Cre\\xADat\\xADing and using an asyn\\xADchro\\xADnous pipe is easy\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// The read stream will be paused until the pipe is used\"),`\nPipe<Buffer> pipe = readStream.pipe();\ngetAsyncPipe(ar -> {\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),` (ar.succeeded()) {\n    pipe.to(writeStream);\n  } `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"else\"),` {\n    pipe.close();\n  }\n});\n`)),mdx(\"h2\",e({},{id:\"kafka-admin-client\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#kafka-admin-client\"})),\"Kafka admin client\"),mdx(\"p\",null,\"The new ver\\xADsion brings a Vert.x based first im\\xADple\\xADmen\\xADta\\xADtion of the na\\xADtive \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://kafka.apache.org/documentation/#adminapi\"}),\"Kafka Admin Client API\"),`\nwhich are in Java, in\\xADstead of Scala used in the pre\\xADvi\\xADous ver\\xADsion.`),mdx(\"p\",null,\"The \",mdx(\"inlineCode\",{parentName:\"p\"},\"AdminUtils\"),\" is now dep\\xADre\\xADcated and the new \",mdx(\"inlineCode\",{parentName:\"p\"},\"KafkaAdminClient\"),` is avail\\xADable in\\xADstead.\nIt al\\xADlows to re\\xADmove the last Scala ar\\xADti\\xADfact de\\xADpen\\xADdency.`),mdx(\"p\",null,\"While the \",mdx(\"inlineCode\",{parentName:\"p\"},\"AdminUtils\"),` im\\xADple\\xADmen\\xADta\\xADtion needs to con\\xADnect to Zookeeper for ad\\xADmin\\xADis\\xADtra\\xADtion pur\\xADposes,\nthe `,mdx(\"inlineCode\",{parentName:\"p\"},\"KafkaAdminClient\"),\" only uses the Kafka boot\\xADstrap bro\\xADkers con\\xADnec\\xADtion.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),\"Properties config = \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),` Properties();\nconfig.put(AdminClientConfig.BOOTSTRAP_SERVERS_CONFIG, `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"my-kafka-broker:9092\"'),`);\n\nKafkaAdminClient adminClient = KafkaAdminClient.create(vertx, config);\n`)),mdx(\"p\",null,\"The fea\\xADtures cur\\xADrently sup\\xADported are:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"cre\\xADate and delete top\\xADics\"),mdx(\"li\",{parentName:\"ul\"},\"list all the top\\xADics\"),mdx(\"li\",{parentName:\"ul\"},\"de\\xADscribe top\\xADics for get\\xADting in\\xADfor\\xADma\\xADtion about leader par\\xADti\\xADtion, fol\\xADlower repli\\xADcas and ISR (in-\\u200Bsync repli\\xADcas) list\"),mdx(\"li\",{parentName:\"ul\"},\"alter top\\xADics con\\xADfig\\xADu\\xADra\\xADtion\"),mdx(\"li\",{parentName:\"ul\"},\"list all con\\xADsumer groups\"),mdx(\"li\",{parentName:\"ul\"},\"de\\xADscribe con\\xADsumer groups for get\\xADting in\\xADfor\\xADma\\xADtion like the state, the co\\xADor\\xADdi\\xADna\\xADtor host, con\\xADsumers per top\\xADics and so on\")),mdx(\"p\",null,\"If you are using the \",mdx(\"inlineCode\",{parentName:\"p\"},\"AdminUtils\"),\" today, con\\xADsider mi\\xADgrate to the new \",mdx(\"inlineCode\",{parentName:\"p\"},\"KafkaAdminClient\"),\" be\\xADcause the for\\xADmer will be re\\xADmoved in Vert.x 4.0.\"),mdx(\"h2\",e({},{id:\"and-more\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#and-more\"})),\"And more\\u2026\"),mdx(\"p\",null,\"Here are some other im\\xADpor\\xADtant im\\xADprove\\xADments you can find in this re\\xADlease:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Shared data struc\\xADtures avail\\xADable in local-\\u200Bonly mode even when Vert.x is clus\\xADtered\"),mdx(\"li\",{parentName:\"ul\"},\"JSON de\\xADcod\\xADing with\\xADout prior knowl\\xADedge of the struc\\xADture (ob\\xADject, array, string, \\u2026etc)\"),mdx(\"li\",{parentName:\"ul\"},\"In\\xADfin\\xADis\\xADpan Clus\\xADter Man\\xADager up\\xADgraded to \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://infinispan.org\"}),\"In\\xADfin\\xADis\\xADpan\"),\" 9.4.10.Final\"),mdx(\"li\",{parentName:\"ul\"},\"And ob\\xADvi\\xADously we have the usual bug fixes!\")),mdx(\"h2\",e({},{id:\"finally\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#finally\"})),\"Finally\"),mdx(\"p\",null,\"The \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/vert-x3/wiki/wiki/3.7.0-Release-Notes\"}),\"3.7.0 re\\xADlease notes\"),` can be found on the wiki, as well as the\nlist of `,mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/vert-x3/wiki/wiki/3.7.0-Deprecations-and-breaking-changes\"}),\"dep\\xADre\\xADca\\xADtions and break\\xADing changes\")),mdx(\"p\",null,\"Docker im\\xADages are avail\\xADable on \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://hub.docker.com/u/vertx/\"}),\"Docker Hub\"),\".\"),mdx(\"p\",null,\"The Vert.x dis\\xADtri\\xADb\\xADu\\xADtion can be down\\xADloaded on the web\\xADsite but is also avail\\xADable from \",mdx(\"a\",e({parentName:\"p\"},{href:\"http://sdkman.io/index.html\"}),\"SD\\xADKMan\"),\" and \",mdx(\"a\",e({parentName:\"p\"},{href:\"http://brew.sh/\"}),\"Home\\xADBrew\"),\".\"),mdx(\"p\",null,\"The event bus client using the SockJS bridge is avail\\xADable from:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"https://www.npmjs.com/package/vertx3-eventbus-client\"}),\"NPM\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"https://github.com/vert-x3/vertx-bus-bower\"}),\"Bower\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"http://www.webjars.org/\"}),\"We\\xADb\\xADJars\"))),mdx(\"p\",null,\"The re\\xADlease ar\\xADti\\xADfacts have been de\\xADployed to \",mdx(\"a\",e({parentName:\"p\"},{href:\"http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22io.vertx%22%20AND%20v%3A%223.7.0%22\"}),\"Maven Cen\\xADtral\"),\" and you can get the dis\\xADtri\\xADb\\xADu\\xADtion on \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://bintray.com/vertx/downloads/distribution/3.7.0/view\"}),\"Bin\\xADtray\"),\".\"),mdx(\"p\",null,\"That\\u2019s it! Happy cod\\xADing and see you soon on our user or dev \",mdx(Link,{href:\"/community\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),\"chan\\xADnels\")),\".\"))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"prevPost":{"meta":{"title":"Eclipse Vert.x 3.7.1","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"We have just released Vert.x 3.7.1, a bug fix release of Vert.x 3.7.x and a few small features."},"date":"2019-05-27","slug":"eclipse-vert-x-3-7-1"},"nextPost":{"meta":{"title":"Eclipse Vert.x 3.6.3","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"We have just released Vert.x 3.6.3, a bug fix release of Vert.x 3.6.x."},"date":"2019-02-04","slug":"eclipse-vert-x-3-6-3"},"relatedPosts":[{"meta":{"title":"Building services and APIs with AMQP 1.0","category":"guides","authors":[{"name":"Jakub Scholz","github_id":"scholzj"}],"summary":"Microservices and APIs are everywhere. Everyone talks about them, presentation slides are full of them ... some people are actually even building them."},"date":"2017-01-25","slug":"building-services-and-apis-with-amqp-1-0"},{"meta":{"title":"Things to keep in mind concerning CSRF attacks","category":"guides","authors":[{"name":"Xhelal Likaj","github_id":"xhlika"}],"summary":"Eclipse Vert.x like most frameworks provides an anti-CSRF defense. However, no framework can prevent all attack vectors that exist in the web. Therefore, developers need to be aware of some dangers and common attack vectors concerning CSRF defenses."},"date":"2021-01-23","slug":"eclipse-vert-x-CSRF-concerns"},{"meta":{"title":"What's new in Vert.x 4.2","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"See an overview of all new and exciting features in Vert.x 4.2, including Java 17 support, Vert.x Oracle Client and more.","pinned":true},"date":"2021-10-26","slug":"whats-new-in-vert-x-4-2"}]},"__N_SSG":true}