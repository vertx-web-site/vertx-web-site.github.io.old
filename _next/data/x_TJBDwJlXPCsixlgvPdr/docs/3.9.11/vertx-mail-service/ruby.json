{"pageProps":{"slug":"3.9.11/vertx-mail-service/ruby","title":"Vert.x Mail service (SMTP client implementation)","fallbackGitHubStars":null,"toc":"<div id=\"toc\" class=\"toc\">\n<div id=\"toctitle\">Table of Contents</div>\n<ul class=\"sectlevel1\">\n<li><a href=\"#_mailservice\">MailService</a>\n<ul class=\"sectlevel2\">\n<li><a href=\"#_service_client\">Service client</a></li>\n</ul>\n</li>\n<li><a href=\"#_service_listener\">Service listener</a></li>\n</ul>\n</div>","contents":"<h1>Vert.x Mail service (SMTP client implementation)</h1>\n\n<div id=\"preamble\">\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Vert.x service for sending SMTP emails via the vert.x event bus by\na mail service running on another machine on the local network.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_mailservice\"><a class=\"anchor\" href=\"#_mailservice\"></a>MailService</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>The MailService interface supports sending mails through another server running\non the local network by the event bus.</p>\n</div>\n<div class=\"paragraph\">\n<p>To use this project, add the following dependency to the <em>dependencies</em> section of your build descriptor:</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Maven (in your <code>pom.xml</code>):</p>\n</li>\n</ul>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-xml\" data-lang=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>io.vertx<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>vertx-mail-service<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>3.9.11<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span></code></pre>\n</div>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Gradle (in your <code>build.gradle</code> file):</p>\n</li>\n</ul>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-groovy\" data-lang=\"groovy\">compile io.<span class=\"hljs-attr\">vertx:</span>vertx-mail-<span class=\"hljs-attr\">service:</span><span class=\"hljs-number\">3.9</span><span class=\"hljs-number\">.11</span></code></pre>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_service_client\"><a class=\"anchor\" href=\"#_service_client\"></a>Service client</h3>\n<div class=\"paragraph\">\n<p>The service client only needs the name of the service address as parameter, the\ndefault is \"vertx.mail\".</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-ruby\" data-lang=\"ruby\"><span class=\"hljs-keyword\">require</span> <span class=\"hljs-string\">&#x27;vertx-mail/mail_service&#x27;</span>\nmailService = VertxMail::MailService.create_event_bus_proxy(vertx, <span class=\"hljs-string\">&quot;vertx.mail&quot;</span>)</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>The behaviour of MailClient and MailService is the same, if you like you can use the\nMailClient interface to store the MailService instance.</p>\n</div>\n<div class=\"paragraph\">\n<p>A more complete example for sending a mail via the event bus is this:</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-ruby\" data-lang=\"ruby\"><span class=\"hljs-keyword\">require</span> <span class=\"hljs-string\">&#x27;vertx-mail/mail_service&#x27;</span>\nmailService = VertxMail::MailService.create_event_bus_proxy(vertx, <span class=\"hljs-string\">&quot;vertx.mail&quot;</span>)\n\nemail = {\n  <span class=\"hljs-string\">&#x27;from&#x27;</span> =&gt; <span class=\"hljs-string\">&quot;user@example.com&quot;</span>,\n  <span class=\"hljs-string\">&#x27;bounceAddress&#x27;</span> =&gt; <span class=\"hljs-string\">&quot;bounce@example.com&quot;</span>,\n  <span class=\"hljs-string\">&#x27;to&#x27;</span> =&gt; <span class=\"hljs-string\">&quot;user@example.com&quot;</span>\n}\n\nmailService.send_mail(email) { |<span class=\"hljs-params\">result_err,result</span>|\n  puts <span class=\"hljs-string\">&quot;mail finished&quot;</span>\n  <span class=\"hljs-keyword\">if</span> (result_err == <span class=\"hljs-literal\">nil</span>)\n    puts result\n  <span class=\"hljs-keyword\">else</span>\n    puts <span class=\"hljs-string\">&quot;got exception&quot;</span>\n    result_err.print_stack_trace()\n  <span class=\"hljs-keyword\">end</span>\n}</code></pre>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_service_listener\"><a class=\"anchor\" href=\"#_service_listener\"></a>Service listener</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>To run the service listener that sends the mails, you need to start it separately\ne.g. with the vertx command</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-shell\" data-lang=\"shell\">vertx run service:io.vertx.mail-service</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>or deploy the verticle inside your program.</p>\n</div>\n<div class=\"paragraph\">\n<p>If you have a smtp server running on the machine on port 25, you can use the default config.</p>\n</div>\n</div>\n</div>","version":"3.9.11"},"__N_SSG":true}