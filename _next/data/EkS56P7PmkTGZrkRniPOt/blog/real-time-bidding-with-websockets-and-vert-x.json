{"pageProps":{"categories":["releases","guides","security","news"],"post":{"meta":{"title":"Real-time bidding with Websockets and Vert.x","category":"guides","authors":[{"name":"Marcin Warczyglowa","github_id":"mwarc"}],"summary":"The expectations of users for interactivity with web applications have changed over the past few years.\n    Users during bidding in auction no longer want to press the refresh button."},"date":"2016-01-15","slug":"real-time-bidding-with-websockets-and-vert-x","readingTime":{"text":"10 min read","minutes":9.485,"time":569100,"words":1897},"content":{"compiledSource":"var d=Object.defineProperty,m=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var r=Object.getOwnPropertySymbols;var p=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;var i=(a,n,s)=>n in a?d(a,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[n]=s,e=(a,n)=>{for(var s in n||(n={}))p.call(n,s)&&i(a,s,n[s]);if(r)for(var s of r(n))o.call(n,s)&&i(a,s,n[s]);return a},l=(a,n)=>m(a,h(n));var c=(a,n)=>{var s={};for(var t in a)p.call(a,t)&&n.indexOf(t)<0&&(s[t]=a[t]);if(a!=null&&r)for(var t of r(a))n.indexOf(t)<0&&o.call(a,t)&&(s[t]=a[t]);return s};const makeShortcode=a=>function(s){return console.warn(\"Component \"+a+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",e({},s))},Link=makeShortcode(\"Link\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(s){var t=s,{components:a}=t,n=c(t,[\"components\"]);return mdx(MDXLayout,l(e(e({},layoutProps),n),{components:a,mdxType:\"MDXLayout\"}),mdx(\"p\",null,`The ex\\xADpec\\xADta\\xADtions of users for in\\xADter\\xADac\\xADtiv\\xADity with web ap\\xADpli\\xADca\\xADtions have changed over the past few years.\nUsers dur\\xADing bid\\xADding in auc\\xADtion no longer want to press the re\\xADfresh but\\xADton to check if the price\nhas changed or the auc\\xADtion is over. This made bid\\xADding dif\\xADfi\\xADcult and less fun.\nIn\\xADstead, they ex\\xADpect to see the up\\xADdates in ap\\xADpli\\xADca\\xADtion in real-\\u200Btime.`),mdx(\"p\",null,`In this ar\\xADti\\xADcle I want to show how to cre\\xADate a sim\\xADple ap\\xADpli\\xADca\\xADtion that pro\\xADvides real-\\u200Btime bid\\xADding.\nWe will use Web\\xADSock\\xADets, `,mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/sockjs/sockjs-client\"}),\"SockJS\"),\" and Vert.x.\"),mdx(\"p\",null,\"We will cre\\xADate a front-\\u200Bend for fast bid\\xADding that com\\xADmu\\xADni\\xADcates with a micro-\\u200Bservice writ\\xADten in Java and based on Vert.x.\"),mdx(\"h2\",e({},{id:\"what-are-websockets\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#what-are-websockets\"})),\"What are Websockets?\"),mdx(\"p\",null,`Web\\xADSocket is asyn\\xADchro\\xADnous, bidi\\xADrec\\xADtional, full-\\u200Bduplex pro\\xADto\\xADcol that pro\\xADvides a com\\xADmu\\xADni\\xADca\\xADtion chan\\xADnel over a sin\\xADgle TCP con\\xADnec\\xADtion.\nWith the `,mdx(\"a\",e({parentName:\"p\"},{href:\"http://www.w3.org/TR/websockets/\"}),\"Web\\xADSocket API\"),\" it pro\\xADvides bidi\\xADrec\\xADtional com\\xADmu\\xADni\\xADca\\xADtion be\\xADtween the web\\xADsite and a re\\xADmote server.\"),mdx(\"p\",null,`Web\\xADSock\\xADets solve many prob\\xADlems which pre\\xADvented the HTTP pro\\xADto\\xADcol from being suit\\xADable for use in mod\\xADern,\nreal-\\u200Btime ap\\xADpli\\xADca\\xADtions. Workarounds like polling are no longer needed, which sim\\xADpli\\xADfies ap\\xADpli\\xADca\\xADtion ar\\xADchi\\xADtec\\xADture.\nWeb\\xADSock\\xADets do not need to open mul\\xADti\\xADple HTTP con\\xADnec\\xADtions, they pro\\xADvide a re\\xADduc\\xADtion of un\\xADnec\\xADes\\xADsary net\\xADwork traf\\xADfic and re\\xADduce la\\xADtency.`),mdx(\"h2\",e({},{id:\"websocket-api-vs-sockjs\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#websocket-api-vs-sockjs\"})),\"Websocket API vs SockJS\"),mdx(\"p\",null,`Un\\xADfor\\xADtu\\xADnately, Web\\xADSock\\xADets are not sup\\xADported by all web browsers. How\\xADever, there are li\\xADbraries that pro\\xADvide a fall\\xADback\nwhen Web\\xADSock\\xADets are not avail\\xADable. One such li\\xADbrary is `,mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/sockjs/sockjs-client\"}),\"SockJS\"),`.\nSockJS starts from try\\xADing to use the Web\\xADSocket pro\\xADto\\xADcol. How\\xADever, if this is not pos\\xADsi\\xADble,\nit uses  a `,mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/sockjs/sockjs-client#supported-transports-by-browser-html-served-from-http-or-https\"}),\"va\\xADri\\xADety of browser-\\u200Bspecific trans\\xADport pro\\xADto\\xADcols\"),`.\nSockJS is a li\\xADbrary de\\xADsigned to work in all mod\\xADern browsers and in en\\xADvi\\xADron\\xADments that do not sup\\xADport Web\\xADSocket pro\\xADto\\xADcol,\nfor in\\xADstance be\\xADhind re\\xADstric\\xADtive cor\\xADpo\\xADrate proxy. SockJS pro\\xADvides an API sim\\xADi\\xADlar to the stan\\xADdard Web\\xADSocket API.`),mdx(\"h2\",e({},{id:\"frontend-to-fast-bidding\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#frontend-to-fast-bidding\"})),\"Frontend to fast bidding\"),mdx(\"p\",null,`Auc\\xADtion web page con\\xADtains the bid\\xADding form and some sim\\xADple JavaScript which loads cur\\xADrent price from the ser\\xADvice,\nopens an event bus con\\xADnec\\xADtion to the SockJS server and of\\xADfers bid\\xADding.\nHTML source code of sam\\xADple web page on which we bid might look like this:`),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-html\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"h3\"),\">\"),\"Auction 1\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"h3\"),\">\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"div\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-attr\"}),\"id\"),\"=\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-string\"}),'\"error_message\"'),\">\"),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"div\"),\">\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"form\"),\">\"),`\n    Current price:\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"span\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-attr\"}),\"id\"),\"=\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-string\"}),'\"current_price\"'),\">\"),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"span\"),\">\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"div\"),\">\"),`\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"label\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-attr\"}),\"for\"),\"=\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-string\"}),'\"my_bid_value\"'),\">\"),\"Your offer:\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"label\"),\">\"),`\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"input\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-attr\"}),\"id\"),\"=\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-string\"}),'\"my_bid_value\"'),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-attr\"}),\"type\"),\"=\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-string\"}),'\"text\"'),\">\"),`\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"input\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-attr\"}),\"type\"),\"=\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-string\"}),'\"button\"'),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-attr\"}),\"onclick\"),\"=\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-string\"}),'\"bid();\"'),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-attr\"}),\"value\"),\"=\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-string\"}),'\"Bid\"'),\">\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"div\"),\">\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"div\"),\">\"),`\n        Feed:\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"textarea\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-attr\"}),\"id\"),\"=\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-string\"}),'\"feed\"'),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-attr\"}),\"rows\"),\"=\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-string\"}),'\"4\"'),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-attr\"}),\"cols\"),\"=\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-string\"}),'\"50\"'),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-attr\"}),\"readonly\"),\">\"),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"textarea\"),\">\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"div\"),\">\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-name\"}),\"form\"),\">\"),`\n`)),mdx(\"p\",null,\"We use the \",mdx(\"inlineCode\",{parentName:\"p\"},\"vertx-eventbus.js\"),` li\\xADbrary to cre\\xADate a con\\xADnec\\xADtion to the event bus.\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"vertx-eventbus.js\"),\" li\\xADbrary is a part of the Vert.x dis\\xADtri\\xADb\\xADu\\xADtion. \",mdx(\"inlineCode\",{parentName:\"p\"},\"vertx-eventbus.js\"),` in\\xADter\\xADnally uses SockJS li\\xADbrary\nto send the data to the SockJS server. In the code snip\\xADpet below we cre\\xADate an in\\xADstance of the event bus.\nThe pa\\xADra\\xADme\\xADter to the con\\xADstruc\\xADtor is the URI where to con\\xADnect to the event bus.\nThen we reg\\xADis\\xADter the han\\xADdler lis\\xADten\\xADing on ad\\xADdress `,mdx(\"inlineCode\",{parentName:\"p\"},\"auction.<auction_id>\"),`. Each client has a pos\\xADsi\\xADbil\\xADity of reg\\xADis\\xADter\\xADing\nat mul\\xADti\\xADple ad\\xADdresses e.g. when bid\\xADding in the auc\\xADtion 1234, they reg\\xADis\\xADter on the ad\\xADdress `,mdx(\"inlineCode\",{parentName:\"p\"},\"auction.1234\"),` etc.\nWhen data ar\\xADrives in the han\\xADdler, we change the cur\\xADrent price and the bid\\xADding feed on the auc\\xADtion\\u2019s web page.`),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-javascript\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"function\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"registerHandlerForUpdateCurrentPriceAndFeed\"),\"(\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"})),\") \"),`{\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"var\"),\" eventBus = \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),\" EventBus(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),\"'http://localhost:8080/eventbus'\"),`);\n    eventBus.onopen = `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"function\"),\" (\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"})),\") \"),`{\n        eventBus.registerHandler(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),\"'auction.'\"),\" + auction_id, \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"function\"),\" (\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"}),\"error, message\"),\") \"),`{\n            `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"document\"),\".getElementById(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),\"'current_price'\"),\").innerHTML = \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"JSON\"),`.parse(message.body).price;\n            `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"document\"),\".getElementById(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),\"'feed'\"),\").value += \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),\"'New offer: '\"),\" + \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"JSON\"),\".parse(message.body).price + \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),\"'\\\\n'\"),`;\n        });\n    }\n};\n`)),mdx(\"p\",null,`Any user at\\xADtempt to bid gen\\xADer\\xADates a PATCH Ajax re\\xADquest\nto the ser\\xADvice with in\\xADfor\\xADma\\xADtion about the new offer made at auc\\xADtion (see `,mdx(\"inlineCode\",{parentName:\"p\"},\"bid()\"),` func\\xADtion).\nOn the server side we pub\\xADlish this in\\xADfor\\xADma\\xADtion on the event bus to all clients reg\\xADis\\xADtered to an ad\\xADdress.\nIf you re\\xADceive an HTTP re\\xADsponse sta\\xADtus code other than `,mdx(\"inlineCode\",{parentName:\"p\"},\"200 (OK)\"),\", an error mes\\xADsage is dis\\xADplayed on the web page.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-javascript\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"function\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"bid\"),\"(\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"})),\") \"),`{\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"var\"),\" newPrice = \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"document\"),\".getElementById(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),\"'my_bid_value'\"),`).value;\n\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"var\"),\" xmlhttp = (\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"window\"),\".XMLHttpRequest) ? \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),\" XMLHttpRequest() : \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),\" ActiveXObject(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"Microsoft.XMLHTTP\"'),`);\n    xmlhttp.onreadystatechange = `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"function\"),\" (\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"})),\") \"),`{\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (xmlhttp.readyState == \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"4\"),`) {\n            `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (xmlhttp.status != \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"200\"),`) {\n                `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"document\"),\".getElementById(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),\"'error_message'\"),\").innerHTML = \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),\"'Sorry, something went wrong.'\"),`;\n            }\n        }\n    };\n    xmlhttp.open(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"PATCH\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"http://localhost:8080/api/auctions/\"'),` + auction_id);\n    xmlhttp.setRequestHeader(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"Content-Type\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"application/json\"'),`);\n    xmlhttp.send(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"JSON\"),\".stringify({\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),\"price\"),`: newPrice}));\n};\n`)),mdx(\"h2\",e({},{id:\"auction-service\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#auction-service\"})),\"Auction Service\"),mdx(\"p\",null,`SockJS client re\\xADquires the server-\\u200Bside part. Now we are going to cre\\xADate a light-\\u200Bweight REST\\xADful auc\\xADtion ser\\xADvice.\nWe will send and re\\xADtrieve data in JSON for\\xADmat. Let\\u2019s start by cre\\xADat\\xADing a ver\\xADti\\xADcle.\nFirst we need to in\\xADherit from `,mdx(Link,{href:\"/docs/apidocs/io/vertx/core/AbstractVerticle.html\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"AbstractVerticle\"))),`\nand over\\xADride the `,mdx(\"inlineCode\",{parentName:\"p\"},\"start\"),` method.\nEach ver\\xADti\\xADcle in\\xADstance has a mem\\xADber vari\\xADable called `,mdx(\"inlineCode\",{parentName:\"p\"},\"vertx\"),`. This pro\\xADvides ac\\xADcess to the Vert.x core API.\nFor ex\\xADam\\xADple, to cre\\xADate an HTTP server you call the `,mdx(\"inlineCode\",{parentName:\"p\"},\"createHttpServer\"),\" method on \",mdx(\"inlineCode\",{parentName:\"p\"},\"vertx\"),` in\\xADstance.\nTo tell the server to lis\\xADten on port 8080 for in\\xADcom\\xADing re\\xADquests you use the `,mdx(\"inlineCode\",{parentName:\"p\"},\"listen\"),\" method.\"),mdx(\"p\",null,`We need a router with routes. A router takes an HTTP re\\xADquest and finds the first match\\xADing route.\nThe route can have a han\\xADdler as\\xADso\\xADci\\xADated with it, which re\\xADceives the re\\xADquest\n(e.g. route that matches path `,mdx(\"inlineCode\",{parentName:\"p\"},\"/eventbus/*\"),\" is  as\\xADso\\xADci\\xADated with \",mdx(\"inlineCode\",{parentName:\"p\"},\"eventBusHandler\"),\").\"),mdx(\"p\",null,\"We can do some\\xADthing with the re\\xADquest, and then, end it or pass it to the next match\\xADing han\\xADdler.\"),mdx(\"p\",null,\"If you have a lot of han\\xADdlers it makes sense to split them up into mul\\xADti\\xADple routers.\"),mdx(\"p\",null,`You can do this by mount\\xADing a router at a mount point in an\\xADother router\n(see `,mdx(\"inlineCode\",{parentName:\"p\"},\"auctionApiRouter\"),\" that cor\\xADre\\xADsponds to \",mdx(\"inlineCode\",{parentName:\"p\"},\"/api\"),\" mount point in code snip\\xADpet below).\"),mdx(\"p\",null,\"Here\\u2019s an ex\\xADam\\xADple ver\\xADti\\xADcle:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"public\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-class\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"class\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"AuctionServiceVerticle\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"extends\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"AbstractVerticle\"),\" \"),`{\n\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-meta\"}),\"@Override\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"public\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"void\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"start\"),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"}),\"()\"),\" \"),`{\n        Router router = Router.router(vertx);\n\n        router.route(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"/eventbus/*\"'),`).handler(eventBusHandler());\n        router.mountSubRouter(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"/api\"'),`, auctionApiRouter());\n        router.route().failureHandler(errorHandler());\n        router.route().handler(staticHandler());\n\n        vertx.createHttpServer().requestHandler(router::accept).listen(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"8080\"),`);\n    }\n\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"//\\u2026\"),`\n}\n`)),mdx(\"p\",null,`Now we\\u2019ll look at things in more de\\xADtail. We\\u2019ll dis\\xADcuss Vert.x fea\\xADtures used in ver\\xADti\\xADcle:\nerror han\\xADdler, SockJS han\\xADdler, body han\\xADdler, shared data, sta\\xADtic han\\xADdler and rout\\xADing based on method, path etc.`),mdx(\"h3\",e({},{id:\"error-handler\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#error-handler\"})),\"Error handler\"),mdx(\"p\",null,`As well as set\\xADting han\\xADdlers to han\\xADdle re\\xADquests you can also set a han\\xADdler for fail\\xADures in rout\\xADing.\nFail\\xADure in rout\\xADing oc\\xADcurs if a han\\xADdler throws an ex\\xADcep\\xADtion, or if a han\\xADdler calls `,mdx(Link,{href:\"/docs/apidocs/io/vertx/ext/web/RoutingContext.html#fail-int-\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"fail\"))),` method.\nTo ren\\xADder error pages we use error han\\xADdler pro\\xADvides by Vert.x:`),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"private\"),\" ErrorHandler \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"errorHandler\"),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"}),\"()\"),\" \"),`{\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),` ErrorHandler.create();\n}\n`)),mdx(\"h3\",e({},{id:\"sockjs-handler\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#sockjs-handler\"})),\"SockJS handler\"),mdx(\"p\",null,`Vert.x pro\\xADvides SockJS han\\xADdler with the event bus bridge which ex\\xADtends\nthe server-\\u200Bside Vert.x event bus into client side JavaScript.`),mdx(\"p\",null,`Con\\xADfig\\xADur\\xADing the bridge to tell it which mes\\xADsages should pass through is easy.\nYou can spec\\xADify which matches you want to allow for in\\xADbound and out\\xADbound traf\\xADfic\nusing the `,mdx(Link,{href:\"/docs/apidocs/io/vertx/ext/web/handler/sockjs/BridgeOptions.html\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"BridgeOptions\"))),`.\nIf a mes\\xADsage is out\\xADbound, be\\xADfore send\\xADing it from the server to the client side JavaScript,\nVert.x will look through any out\\xADbound per\\xADmit\\xADted matches. In code snip\\xADpet below we allow any mes\\xADsages\nfrom ad\\xADdresses start\\xADing with \\u201Cauc\\xADtion.\\u201D and end\\xADing with dig\\xADits (e.g. `,mdx(\"inlineCode\",{parentName:\"p\"},\"auction.1\"),\", \",mdx(\"inlineCode\",{parentName:\"p\"},\"auction.100\"),\" etc).\"),mdx(\"p\",null,`If you want to be no\\xADti\\xADfied when an event oc\\xADcurs on the bridge you can pro\\xADvide a han\\xADdler when call\\xADing the bridge.\nFor ex\\xADam\\xADple, `,mdx(\"inlineCode\",{parentName:\"p\"},\"SOCKET_CREATED\"),` event will occur when a new SockJS socket is cre\\xADated.\nThe event is an in\\xADstance of `,mdx(Link,{href:\"/docs/apidocs/io/vertx/core/Future.html\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"Future\"))),`.\nWhen you are fin\\xADished han\\xADdling the event you can com\\xADplete the fu\\xADture with \\u201Ctrue\\u201D to en\\xADable fur\\xADther pro\\xADcess\\xADing.`),mdx(\"p\",null,\"To start the bridge sim\\xADply call \",mdx(\"inlineCode\",{parentName:\"p\"},\"bridge\"),\" method on the SockJS han\\xADdler:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"private\"),\" SockJSHandler \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"eventBusHandler\"),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"}),\"()\"),\" \"),`{\n    BridgeOptions options = `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),` BridgeOptions()\n            .addOutboundPermitted(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),\" PermittedOptions().setAddressRegex(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"auction\\\\\\\\.[0-9]+\"'),`));\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),` SockJSHandler.create(vertx).bridge(options, event -> {\n         `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),` (event.type() == BridgeEventType.SOCKET_CREATED) {\n            logger.info(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"A socket was created\"'),`);\n        }\n        event.complete(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"true\"),`);\n    });\n}\n`)),mdx(\"h3\",e({},{id:\"body-handler\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#body-handler\"})),\"Body handler\"),mdx(\"p\",null,`The Body\\xADHan\\xADdler al\\xADlows you to re\\xADtrieve the re\\xADquest body, limit the body size and to han\\xADdle the file up\\xADload.\nBody han\\xADdler should be on a match\\xADing route for any re\\xADquests that re\\xADquire this func\\xADtion\\xADal\\xADity.\nWe need Body\\xADHan\\xADdler dur\\xADing the bid\\xADding process (PATCH method re\\xADquest `,mdx(\"inlineCode\",{parentName:\"p\"},\"/auctions/<auction_id>\"),` con\\xADtains re\\xADquest body\nwith in\\xADfor\\xADma\\xADtion about a new offer made at auc\\xADtion). Cre\\xADat\\xADing a new body han\\xADdler is sim\\xADple:`),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),`BodyHandler.create();\n`)),mdx(\"p\",null,`If re\\xADquest body is in JSON for\\xADmat, you can get it with\n`,mdx(Link,{href:\"/docs/apidocs/io/vertx/ext/web/RoutingContext.html#getBodyAsJson--\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"getBodyAsJson\"))),\" method.\"),mdx(\"h3\",e({},{id:\"shared-data\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#shared-data\"})),\"Shared data\"),mdx(\"p\",null,`Shared data con\\xADtains func\\xADtion\\xADal\\xADity that al\\xADlows you to safely share the data be\\xADtween dif\\xADfer\\xADent ap\\xADpli\\xADca\\xADtions\nin the same Vert.x in\\xADstance or across a clus\\xADter of Vert.x in\\xADstances.\nShared data in\\xADcludes local shared maps, dis\\xADtrib\\xADuted, cluster-\\u200Bwide maps, asyn\\xADchro\\xADnous cluster-\\u200Bwide locks\nand asyn\\xADchro\\xADnous cluster-\\u200Bwide coun\\xADters.`),mdx(\"p\",null,`To sim\\xADplify the ap\\xADpli\\xADca\\xADtion we use the local shared map to save in\\xADfor\\xADma\\xADtion about auc\\xADtions.\nThe local shared map al\\xADlows you to share data be\\xADtween dif\\xADfer\\xADent ver\\xADti\\xADcles in the same Vert.x in\\xADstance.\nHere\\u2019s an ex\\xADam\\xADple of using a shared local map in an auc\\xADtion ser\\xADvice:`),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"public\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-class\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"class\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"AuctionRepository\"),\" \"),`{\n\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"//\\u2026\"),`\n\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"public\"),\" Optional<Auction> \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"getById\"),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"}),\"(String auctionId)\"),\" \"),`{\n        LocalMap<String, String> auctionSharedData = `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"this\"),`.sharedData.getLocalMap(auctionId);\n\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),` Optional.of(auctionSharedData)\n            .filter(m -> !m.isEmpty())\n            .map(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"this\"),`::convertToAuction);\n    }\n\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"public\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"void\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"save\"),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"}),\"(Auction auction)\"),\" \"),`{\n        LocalMap<String, String> auctionSharedData = `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"this\"),`.sharedData.getLocalMap(auction.getId());\n\n        auctionSharedData.put(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"id\"'),`, auction.getId());\n        auctionSharedData.put(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"price\"'),`, auction.getPrice());\n    }\n\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"//\\u2026\"),`\n}\n`)),mdx(\"p\",null,`If you want to store auc\\xADtion data in a data\\xADbase, Vert.x pro\\xADvides a few dif\\xADfer\\xADent asyn\\xADchro\\xADnous clients\nfor ac\\xADcess\\xADing var\\xADi\\xADous data stor\\xADages (Mon\\xADgoDB, Redis or JDBC client).`),mdx(\"h3\",e({},{id:\"auction-api\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#auction-api\"})),\"Auction API\"),mdx(\"p\",null,`Vert.x lets you route HTTP re\\xADquests to dif\\xADfer\\xADent han\\xADdlers based on pat\\xADtern match\\xADing on the re\\xADquest path.\nIt also en\\xADables you to ex\\xADtract val\\xADues from the path and use them as pa\\xADra\\xADme\\xADters in the re\\xADquest.\nCor\\xADre\\xADspond\\xADing meth\\xADods exist for each HTTP method. The first match\\xADing one will re\\xADceive the re\\xADquest.\nThis func\\xADtion\\xADal\\xADity is par\\xADtic\\xADu\\xADlarly use\\xADful when de\\xADvel\\xADop\\xADing REST-\\u200Bstyle web ap\\xADpli\\xADca\\xADtions.`),mdx(\"p\",null,`To ex\\xADtract pa\\xADra\\xADme\\xADters from the path, you can use the colon char\\xADac\\xADter to de\\xADnote the name of a pa\\xADra\\xADme\\xADter.\nReg\\xADu\\xADlar ex\\xADpres\\xADsions can also be used to ex\\xADtract more com\\xADplex matches.\nAny pa\\xADra\\xADme\\xADters ex\\xADtracted by pat\\xADtern match\\xADing are added to the map of re\\xADquest pa\\xADra\\xADme\\xADters.`),mdx(\"p\",null,mdx(Link,{href:\"/docs/apidocs/io/vertx/ext/web/Route.html#consumes-java.lang.String-\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"Consumes\"))),`\nde\\xADscribes which MIME types the han\\xADdler can con\\xADsume.\nBy using `,mdx(Link,{href:\"/docs/apidocs/io/vertx/ext/web/Route.html#produces-java.lang.String-\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"produces\"))),`\nyou de\\xADfine which MIME types the route pro\\xADduces.\nIn the code below the routes will match any re\\xADquest with `,mdx(\"inlineCode\",{parentName:\"p\"},\"content-type\"),` header\nand `,mdx(\"inlineCode\",{parentName:\"p\"},\"accept\"),\" header that matches \",mdx(\"inlineCode\",{parentName:\"p\"},\"application/json\"),\".\"),mdx(\"p\",null,\"Let\\u2019s look at an ex\\xADam\\xADple of a sub\\xADrouter mounted on the main router which was cre\\xADated in \",mdx(\"inlineCode\",{parentName:\"p\"},\"start\"),\" method in ver\\xADti\\xADcle:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"private\"),\" Router \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"auctionApiRouter\"),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"}),\"()\"),\" \"),`{\n    AuctionRepository repository = `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),` AuctionRepository(vertx.sharedData());\n    AuctionValidator validator = `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),` AuctionValidator(repository);\n    AuctionHandler handler = `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),` AuctionHandler(repository, validator);\n\n    Router router = Router.router(vertx);\n    router.route().handler(BodyHandler.create());\n\n    router.route().consumes(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"application/json\"'),`);\n    router.route().produces(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"application/json\"'),`);\n\n    router.get(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"/auctions/:id\"'),`).handler(handler::handleGetAuction);\n    router.patch(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"/auctions/:id\"'),`).handler(handler::handleChangeAuctionPrice);\n\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),` router;\n}\n`)),mdx(\"p\",null,`The GET re\\xADquest re\\xADturns auc\\xADtion data, while the PATCH method re\\xADquest al\\xADlows you to bid up in the auc\\xADtion.\nLet\\u2019s focus on the more in\\xADter\\xADest\\xADing method, namely `,mdx(\"inlineCode\",{parentName:\"p\"},\"handleChangeAuctionPrice\"),`.\nIn the sim\\xADplest terms, the method might look like this:`),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"public\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"void\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"handleChangeAuctionPrice\"),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"}),\"(RoutingContext context)\"),\" \"),`{\n    String auctionId = context.request().getParam(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"id\"'),`);\n    Auction auction = `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),` Auction(\n        auctionId,\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),\" BigDecimal(context.getBodyAsJson().getString(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"price\"'),`))\n    );\n\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"this\"),`.repository.save(auction);\n    context.vertx().eventBus().publish(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"auction.\"'),` + auctionId, context.getBodyAsString());\n\n    context.response()\n        .setStatusCode(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"200\"),`)\n        .end();\n}\n`)),mdx(\"p\",null,mdx(\"inlineCode\",{parentName:\"p\"},\"PATCH\"),\" re\\xADquest to \",mdx(\"inlineCode\",{parentName:\"p\"},\"/auctions/1\"),\" would re\\xADsult in vari\\xADable \",mdx(\"inlineCode\",{parentName:\"p\"},\"auctionId\"),` get\\xADting the value 1.\nWe save a new offer in the auc\\xADtion and then pub\\xADlish this in\\xADfor\\xADma\\xADtion on the event bus to all clients\nreg\\xADis\\xADtered on the ad\\xADdress on the client side JavaScript.\nAfter you have fin\\xADished with the HTTP re\\xADsponse you must call the `,mdx(\"inlineCode\",{parentName:\"p\"},\"end\"),\" func\\xADtion on it.\"),mdx(\"h3\",e({},{id:\"static-handler\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#static-handler\"})),\"Static handler\"),mdx(\"p\",null,`Vert.x pro\\xADvides the han\\xADdler for serv\\xADing sta\\xADtic web re\\xADsources.\nThe de\\xADfault di\\xADrec\\xADtory from which sta\\xADtic files are served is `,mdx(\"inlineCode\",{parentName:\"p\"},\"webroot\"),`, but this can be con\\xADfig\\xADured.\nBy de\\xADfault the sta\\xADtic han\\xADdler will set cache head\\xADers to en\\xADable browsers to cache files.\nSet\\xADting cache head\\xADers can be dis\\xADabled with\n`,mdx(Link,{href:\"/docs/apidocs/io/vertx/ext/web/handler/StaticHandler.html#setCachingEnabled-boolean-\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"setCachingEnabled\"))),` method.\nTo serve the auc\\xADtion HTML page, JS files (and other sta\\xADtic files) from auc\\xADtion ser\\xADvice, you can cre\\xADate a sta\\xADtic han\\xADdler like this:`),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"private\"),\" StaticHandler \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"staticHandler\"),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"}),\"()\"),\" \"),`{\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),` StaticHandler.create()\n        .setCachingEnabled(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"false\"),`);\n}\n`)),mdx(\"h2\",e({},{id:\"lets-run\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#lets-run\"})),\"Let\\u2019s run!\"),mdx(\"p\",null,\"Full ap\\xADpli\\xADca\\xADtion code is avail\\xADable on \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/mwarc/simple-realtime-auctions-vertx3-example\"}),\"github\"),\".\"),mdx(\"p\",null,\"Clone the repos\\xADi\\xADtory and run \",mdx(\"inlineCode\",{parentName:\"p\"},\"./gradlew run\"),\".\"),mdx(\"p\",null,\"Open one or more browsers and point them to \",mdx(\"inlineCode\",{parentName:\"p\"},\"http://localhost:8080\"),\". Now you can bid in auc\\xADtion:\"),mdx(\"p\",null,mdx(\"img\",e({parentName:\"p\"},{src:\"/images/blog/real-time-bidding-with-websockets-and-vertx/bidding_in_application.png\",alt:\"Real time bidding in application\"}))),mdx(\"h2\",e({},{id:\"summary\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#summary\"})),\"Summary\"),mdx(\"p\",null,`This ar\\xADti\\xADcle presents the out\\xADline of a sim\\xADple ap\\xADpli\\xADca\\xADtion that al\\xADlows real-\\u200Btime bid\\xADding.\nWe cre\\xADated a light\\xADweight, high-\\u200Bperformance and scal\\xADable micro-\\u200Bservice writ\\xADten in Java and based on Vert.x.\nWe dis\\xADcussed what Vert.x of\\xADfers, among oth\\xADers, a dis\\xADtrib\\xADuted event bus and an el\\xADe\\xADgant API that al\\xADlows you to cre\\xADate ap\\xADpli\\xADca\\xADtions in no time.`))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"prevPost":{"meta":{"title":"Using Hamcrest Matchers with Vert.x Unit","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"Vert.x Unit is a very elegant library to test asynchronous applications developed with vert.x. However because of this asynchronous aspect, reporting test failures is not natural for JUnit users."},"date":"2016-01-18","slug":"using-hamcrest-matchers-with-vert-x-unit"},"nextPost":{"meta":{"title":"ECMAScript 6/7 on the JVM with TypeScript and Vert.x","category":"guides","authors":[{"name":"Michel Krämer","github_id":"michel-kraemer"}],"summary":"I figured it would be a good idea to give you a couple of examples how teaming\n  Vert.x and TypeScript helps you use ECMAScript 6 and 7 features on the JVM today."},"date":"2016-01-03","slug":"ecmascript-6-7-on-the-jvm-with-typescript-and-vert-x"},"relatedPosts":[{"meta":{"title":"Things to keep in mind concerning CSRF attacks","category":"guides","authors":[{"name":"Xhelal Likaj","github_id":"xhlika"}],"summary":"Eclipse Vert.x like most frameworks provides an anti-CSRF defense. However, no framework can prevent all attack vectors that exist in the web. Therefore, developers need to be aware of some dangers and common attack vectors concerning CSRF defenses."},"date":"2021-01-23","slug":"eclipse-vert-x-CSRF-concerns"},{"meta":{"title":"Some Rest with Vert.x","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"This post is part of the Introduction to Vert.x series. Let’s go a bit further this time and develop a CRUD-ish application"},"date":"2015-07-27","slug":"some-rest-with-vert-x"},{"meta":{"title":"Building services and APIs with AMQP 1.0","category":"guides","authors":[{"name":"Jakub Scholz","github_id":"scholzj"}],"summary":"Microservices and APIs are everywhere. Everyone talks about them, presentation slides are full of them ... some people are actually even building them."},"date":"2017-01-25","slug":"building-services-and-apis-with-amqp-1-0"}]},"__N_SSG":true}